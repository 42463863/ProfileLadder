<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Functional-Based Reserving with the R Package ProfileLadder • ProfileLadder</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Functional-Based Reserving with the R Package ProfileLadder">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ProfileLadder</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/my_vignette.html">Functional-Based Reserving with the R Package ProfileLadder</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link maintainer" href="https://karlin.mff.cuni.cz/~maciak">Maintainer: Matúš Maciak</a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Functional-Based Reserving with the R Package ProfileLadder</h1>
                        <h4 data-toc-skip class="author">Matúš Maciak,
Rastislav Matúš, Ivan Mizera, and Michal Pešta</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/42463863/ProfileLadder/blob/main/vignettes/my_vignette.Rmd" class="external-link"><code>vignettes/my_vignette.Rmd</code></a></small>
      <div class="d-none name"><code>my_vignette.Rmd</code></div>
    </div>

    
    
<p>The <strong>R</strong> package <code>ProfileLadder</code> provides
nonparametric, functional-based methods for claims reserving based on
aggregated chain-ladder data also known as the <em>run-off
triangles</em>. The package implements three estimation/prediction
algorithms (PARALLAX, REACT, and MACRAME) and the permutation bootstrap
add-on proposed in Maciak, Mizera, and Pešta (2022).</p>
<p>The package offers a flexible and computationally effective framework
for point-wise and distributional reserve predictions and includes
pertinent visualization and diagnostic tools through standard S3
methods—such as <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code>,
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>, or <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>. It also provides
accessor functions and real-world datasets to support exploratory
analysis across insurance, operational risks, and other domains where
triangular data structures arise, making modern, transparent, and
extensible alternatives to classical approaches accessible in insurance
industry and academic research.<br></p>
<p>The following lines provide an illustrative sample analysis and
reserve prediction for two specific run-off triangles using all three
nonparametric prediction algorithms and other functions introduced
within the <code>ProfileLadder</code> package. The functionality of the
core functions of the package are and some important features are
presented and discussed. Further theoretical details can be found in</p>
<div style="border: 1px solid #ff0000; background-color: #F5E4E6; padding: 10px; border-radius: 5px;">
<p>
Maciak, M., Mizera, I., and Pešta, M. (2022). <strong>Functional Profile
Techniques for Claims Reserving</strong>. <em>ASTIN Bulletin</em>,
52(2), 449 – 482. DOI: <a href="https://www.cambridge.org/core/journals/astin-bulletin-journal-of-the-iaa/article/abs/functional-profile-techniques-for-claims-reserving/6A4C1D8FA8FC608CCF2C55BDE4C4522D" class="external-link">10.1017/asb.2022.4</a>
</p>
</div>
<hr>
<div class="section level2">
<h2 id="package-manual-and-github-pages">Package manual and GitHub pages<a class="anchor" aria-label="anchor" href="#package-manual-and-github-pages"></a>
</h2>
<ul>
<li>PDF/HTML manual: <a href="https://CRAN.R-project.org/package=ProfileLadder" class="external-link">https://CRAN.R-project.org/package=ProfileLadder</a>
</li>
<li>GitHub Pages: <a href="https://42463863.github.io/ProfileLadder/index.html">https://42463863.github.io/ProfileLadder/index.html</a>
</li>
</ul>
<p>The package <code>ProfileLadder</code> can be installed directly from
CRAN using a standard command</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"ProfileLadder"</span><span class="op">)</span></span></code></pre></div>
<p>The package <code>ProfileLadder</code> also allows for a convenient
and elegant integration with the leading actuarial <strong>R</strong>
package <code>ChainLadder</code> commonly utilized for risk assessment
and actuarial practice. This is mainly ensured through two functions
implemented in <code>ProfileLadder</code>,
<code><a href="../reference/as.profileLadder.html">as.profileLadder()</a></code> and <code><a href="../reference/observed.html">observed()</a></code>. Therefore,
both these actuarial libraries (<strong>R</strong> packages) are used in
the following illustrations.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://42463863.github.io/ProfileLadder">"ProfileLadder"</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://mages.github.io/ChainLadder/" class="external-link">"ChainLadder"</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="package-structure">Package structure<a class="anchor" aria-label="anchor" href="#package-structure"></a>
</h2>
<p>The key functions of the <code>ProfileLadder</code> package that
implement three functional-based nonparametric (point) reserve
prediction algorithms and the overall (distributional) reserve
prediction in terms of the proposed permutation bootstrap resampling
are</p>
<ul>
<li>
<code><a href="../reference/parallelReserve.html">parallelReserve()</a></code> – for PARALLAX and REACT;</li>
<li>
<code><a href="../reference/mcReserve.html">mcReserve()</a></code> – for the MACRAME algorithm;</li>
<li>
<code><a href="../reference/permuteReserve.html">permuteReserve()</a></code> – for the permutation bootstrap
add-on.</li>
</ul>
<p>Note some obvious (and practically convenient) similarities of the
notation and the implementation details that shared with the
<strong>R</strong> package <code>ChainLadder</code>. More details about
the package structure—all functions, S3 type methods, accessor
functions, and illustrative datasets can be found on <a href="https://42463863.github.io/ProfileLadder/reference/index.html">GitHub
Pages</a>.</p>
</div>
<div class="section level2">
<h2 id="notation-and-example-datasets">Notation and example datasets<a class="anchor" aria-label="anchor" href="#notation-and-example-datasets"></a>
</h2>
<p>There are two real datasets—cumulative run-off triangles (both from
the package <code>ProfileLadder</code>)—used in the following claims
reserving example.</p>
<p>The <em>cummulative run-off triagle</em> is a specific data structure
represented by a collection of random variables denoted as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>;</mo><mspace width="0.222em"></mspace><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>;</mo><mi>j</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\{Y_{i,j};~i = 1, \dots, n; j = 1, \dots, n - i + 1\}</annotation></semantics></math>,
where the rows
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>Y</mi><mrow><mi>i</mi><mi>.</mi><mn>1</mn></mrow></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><msubsup><mo stretchy="false" form="postfix">}</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">\{(Y_{i. 1}, \dots, Y_{i, n - i + 1})\}_{i = 1}^n</annotation></semantics></math>
are typically assumed to be independent among each other and they
represent the origins of the reported claims. The columns, on the other
hand, represent the development periods.</p>
<p>The <em>incremental run-off triagle</em> is an analogous dataset
represented by a collection of random variables
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">X_{i,j}</annotation></semantics></math>’s,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>;</mo><mspace width="0.222em"></mspace><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>;</mo><mi>j</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\{X_{i,j};~i = 1, \dots, n; j = 1, \dots, n - i + 1\}</annotation></semantics></math>,
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>=</mo><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>−</mo><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">X_{i,j} = Y_{i,j} - Y_{i, j - 1}</annotation></semantics></math>,
for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>∈</mo><mo stretchy="false" form="prefix">{</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">i \in \{1, \dots, n\}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">j = 1, \dots, n - i + 1</annotation></semantics></math>,
where, in addition,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mn>0</mn></mrow></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">Y_{i,0} = 0</annotation></semantics></math>
for completeness.</p>
<p>There are numerous (real-life) datasets (run-off triangles) not only
from the actuarial practice provided as an integral part of the
<code>ProfileLadder</code> package while most of them were not yet made
available in any other <strong>R</strong> package nor any other publicly
available source. Some of the datasets are unique in this aspect: For
instance, the dataset <code>GFCIB</code>, provided by the Guarantee Fund
of the Czech Insurers’ Bureau (GFCIB) and datasets
<code>CZ.casco</code>, <code>CZ.liability</code>, and
<code>CZ.property</code> provided by a major and market-leading
insurance company in the Czech Republic contain relatively large
(compared to other publicly available actuarial data) run-off triangles
(for example, <code>GFCIP</code> from the mandatory car insurance in the
Czech Republic contains
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>60</mn><annotation encoding="application/x-tex">60</annotation></semantics></math>
origins/quarters and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>60</mn><annotation encoding="application/x-tex">60</annotation></semantics></math>
development periods—quarters again). Similarly, the datasets
<code>CZ.casco</code>, <code>CZ.liability</code>, and
<code>CZ.property</code> provide separate run-off triangles for gross
paid amounts and RBNS reserves (all with the dimensions
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>17</mn><mo>×</mo><mn>17</mn></mrow><annotation encoding="application/x-tex">17 \times 17</annotation></semantics></math>
years).</p>
<p>A comprehensive overview of the data included in the
<code>ProfileLadder</code> package can be obtained in a standard way by
using the command</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>package <span class="op">=</span> <span class="st">"ProfileLadder"</span><span class="op">)</span></span></code></pre></div>
<p>Two particular run-off triangles are selected in the following
illustrations:</p>
<div class="section level3">
<h3 id="a-cameron-mutual-insurance-company-data">a) Cameron Mutual Insurance Company Data<a class="anchor" aria-label="anchor" href="#a-cameron-mutual-insurance-company-data"></a>
</h3>
<p>The dataset belongs to a larger database of real run-off triangles
(provided by Mayers and Shi, 2011) and available also (in a long format
structure) in the <strong>R</strong> package <code>raw</code>. The
run-off triangle is completed into a full square—meaning that “future”
payments are known (typically they are provided retrospectively, mainly
for some evaluation and back-testing purposes). `</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span><span class="st">"CameronMutual"</span><span class="op">)</span> <span class="co">## output omitted</span></span>
<span><span class="op">(</span><span class="va">cameron</span> <span class="op">&lt;-</span> <span class="va">CameronMutual</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       dev</span></span>
<span><span class="co">## origin    1     2     3     4     5     6     7     8     9    10</span></span>
<span><span class="co">##     1  5244  9228 10823 11352 11791 12082 12120 12199 12215 12215</span></span>
<span><span class="co">##     2  5984  9939 11725 12346 12746 12909 13034 13109 13113 13115</span></span>
<span><span class="co">##     3  7452 12421 14171 14752 15066 15354 15637 15720 15744 15786</span></span>
<span><span class="co">##     4  7115 11117 12488 13274 13662 13859 13872 13935 13973 13972</span></span>
<span><span class="co">##     5  5753  8969  9917 10697 11135 11282 11255 11331 11332 11354</span></span>
<span><span class="co">##     6  3937  6524  7989  8543  8757  8901  9013  9012  9046  9164</span></span>
<span><span class="co">##     7  5127  8212  8976  9325  9718  9795  9833  9885  9816  9815</span></span>
<span><span class="co">##     8  5046  8006  8984  9633 10102 10166 10261 10252 10252 10252</span></span>
<span><span class="co">##     9  5129  8202  9185  9681  9951 10033 10133 10182 10182 10183</span></span>
<span><span class="co">##     10 3689  6043  6789  7089  7164  7197  7253  7267  7266  7266</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="b-vehicles-damages-within-a-conventional-full-casco-insurance">b) Vehicles Damages within a Conventional Full Casco Insurance<a class="anchor" aria-label="anchor" href="#b-vehicles-damages-within-a-conventional-full-casco-insurance"></a>
</h3>
<p>The second dataset represents a standard run-off triangle as it is
typically available for actuaries when performing the risk assessment
task and predicting the point and distributional reserve. The dataset
represents cumulative payments for claims related to the compulsory
vehicle insurance in the Czech Republic (having 17 origin years and,
similarly, 17 development perios—years again).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span><span class="st">"CZ.casco"</span><span class="op">)</span> <span class="co">## output omitted</span></span>
<span><span class="op">(</span><span class="va">casco</span> <span class="op">&lt;-</span> <span class="va">CZ.casco</span><span class="op">$</span><span class="va">GrossPaid</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       dev</span></span>
<span><span class="co">## origin    Dev1    Dev2    Dev3    Dev4   Dev5   Dev6   Dev7   Dev8   Dev9</span></span>
<span><span class="co">##     1   532522  689585  688841  689149 689357 689775 689742 689851 689851</span></span>
<span><span class="co">##     2   423582  522523  522135  522605 522643 522352 522352 522329 522314</span></span>
<span><span class="co">##     3   373866  486702  487670  486499 486370 486335 486352 486352 486260</span></span>
<span><span class="co">##     4   441769  561423  558395  557759 557882 558181 558096 557934 557847</span></span>
<span><span class="co">##     5   503292  632003  630153  630124 629686 629598 630431 630378 630357</span></span>
<span><span class="co">##     6   554625  699257  700824  700508 700930 700889 701568 701462 701452</span></span>
<span><span class="co">##     7   613011  759145  759427  759916 758478 758380 758204 758097 758324</span></span>
<span><span class="co">##     8   605922  754837  758541  760264 760850 761308 761178 761153 761108</span></span>
<span><span class="co">##     9   555154  659550  662410  663053 667075 667300 669785 669770 670158</span></span>
<span><span class="co">##     10  514900  622015  623098  624337 624632 624664 624664 626112     NA</span></span>
<span><span class="co">##     11  581196  706328  708099  708853 708447 708194 708428     NA     NA</span></span>
<span><span class="co">##     12  613266  778185  780959  781436 781720 781561     NA     NA     NA</span></span>
<span><span class="co">##     13  706120  885442  890414  891789 894514     NA     NA     NA     NA</span></span>
<span><span class="co">##     14  859707 1052701 1057512 1059593     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     15  951189 1197280 1207771      NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     16 1061511 1317965      NA      NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     17 1121591      NA      NA      NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##       dev</span></span>
<span><span class="co">## origin  Dev10  Dev11  Dev12  Dev13  Dev14  Dev15  Dev16  Dev17</span></span>
<span><span class="co">##     1  689839 689813 689795 689767 689664 689613 689568 689497</span></span>
<span><span class="co">##     2  522271 522267 522231 522196 522104 522072 522003     NA</span></span>
<span><span class="co">##     3  486090 485992 485988 485984 485984 485984     NA     NA</span></span>
<span><span class="co">##     4  557781 557588 557198 557062 557049     NA     NA     NA</span></span>
<span><span class="co">##     5  630338 630280 630270 630271     NA     NA     NA     NA</span></span>
<span><span class="co">##     6  701439 701433 701433     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     7  758263 758233     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     8  761068     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     9      NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     10     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     11     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     12     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     13     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     14     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     15     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     16     NA     NA     NA     NA     NA     NA     NA     NA</span></span>
<span><span class="co">##     17     NA     NA     NA     NA     NA     NA     NA     NA</span></span></code></pre>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="data-visualization-with-profileladder">1. Data visualization with <code>ProfileLadder</code><a class="anchor" aria-label="anchor" href="#data-visualization-with-profileladder"></a>
</h2>
<p>Run-off triangles can be either printed in terms of a
complete/incomplete matrix (as above) or the data can be visualized
using a standard <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method; however, two different S3
classes for the underlying run-off triangle can be used—the run-off
triangle is either of the class <code>triangle</code> (the S3 class
provided by the actuarial package <code>ChainLadder</code>) or an
extented triangle class <code>profileLadder</code>, implemented in the
<strong>R</strong> package <code>ProfileLadder</code>, can be used as a
more complex alternative:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### S3 class 'triangle' from the ChainLadder pkg</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="http://mages.github.io/ChainLadder/reference/Triangles.html" class="external-link">as.triangle</a></span><span class="op">(</span><span class="va">casco</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### S3 class 'profileLadder' from the ProfileLadder pkg</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/as.profileLadder.html">as.profileLadder</a></span><span class="op">(</span><span class="va">casco</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-6-1.png" class="r-plt" alt="" width="98%"></p>
<p>The extended triangle class <code>ProfileLadder</code> (which can be
converted from the S3 classes <code>triangle</code> or
<code>matrix</code> by using the <code><a href="../reference/as.profileLadder.html">as.profileLadder()</a></code>
function) allows, in addtion, for plotting the future (“unknown”)
profiles—if they are provided in the data for some comparisons,
back-testing, or other evaluation purposes. This can be illustrated for
the Cameron Mutual insurance data (that contain such future
profiles):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">### S3 class 'triangle' from the ChainLadder pkg</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="http://mages.github.io/ChainLadder/reference/Triangles.html" class="external-link">as.triangle</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### S3 class 'profileLadder' from the ProfileLadder pkg </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/as.profileLadder.html">as.profileLadder</a></span><span class="op">(</span><span class="fu"><a href="../reference/observed.html">observed</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### S3 class 'profileLadder' (run-off triangle with future profiles)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/as.profileLadder.html">as.profileLadder</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" alt="" width="98%"></p>
<p>Once the future profiles are provided in the data, the information
about the true reserve, typically denoted as
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi><annotation encoding="application/x-tex">R</annotation></semantics></math>
and defined as
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>n</mi></mrow></msub><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mo>,</mo></mrow><annotation encoding="application/x-tex">
R = \sum_{i = 1}^n Y_{i, n} - \sum_{i = 1}^n Y_{i, (n - i + 1)},
</annotation></semantics></math> is also reflected in the legend as
<code>True (unknown) reserve</code> (see the right panel in the figure
above). Otherwise, the task of an actuary is to predict the reserve as
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>R</mi><mo accent="true">̂</mo></mover><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>2</mn></mrow><mi>n</mi></munderover><msub><mover><mi>Y</mi><mo accent="true">̂</mo></mover><mrow><mi>i</mi><mo>,</mo><mi>n</mi></mrow></msub><mo>−</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>2</mn></mrow><mi>n</mi></munderover><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub><mo>,</mo></mrow><annotation encoding="application/x-tex">
\widehat{R} = \sum_{i = 2}^n \widehat{Y}_{i, n} - \sum_{i = 2}^n Y_{i, (n - i + 1)},
</annotation></semantics></math> where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mover><mi>Y</mi><mo accent="true">̂</mo></mover><mrow><mi>i</mi><mo>,</mo><mi>n</mi></mrow></msub><annotation encoding="application/x-tex">\widehat{Y}_{i, n}</annotation></semantics></math>
for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>2</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">i = 2, \dots, n</annotation></semantics></math>
represents the predicted <em>ultimate payments</em> (the last column of
the completed run-off triangle). The quantity
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></msub></mrow><annotation encoding="application/x-tex">\sum_{i = 1}^n Y_{i, (n - i + 1)}</annotation></semantics></math>
represents the amount of already paid claims (the sum of the last
<em>running diagonal</em>, values
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><annotation encoding="application/x-tex">Y_{i, n - i + 1}</annotation></semantics></math>,
for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">i = 1, \dots, n</annotation></semantics></math>).</p>
<div style="border: 1px solid #66a3ff; background-color: #eeeeee; padding: 10px; border-radius: 5px;">
<p>
<strong>Note:</strong> The utility function <code><a href="../reference/observed.html">observed()</a></code>,
used in the code above and implemented in the <strong>R</strong> package
<code>ProfileLadder</code>, allows an easy integration of the package
with the core actuarial library <code>ChainLadder</code> and,
particularly, the easily use the data from other <strong>R</strong>
package <code>raw</code> in both parametric and nonparametric reserving
techniques. More details can be found using the R help session
<code><a href="../reference/observed.html">help("observed")</a></code>.
</p>
</div>
</div>
<div class="section level2">
<h2 id="parallax">2. PARALLAX<a class="anchor" aria-label="anchor" href="#parallax"></a>
</h2>
<p>The idea of the PARALLAX algorithm (<strong>PARALL</strong>el
<strong>A</strong>ppro<strong>X</strong>imation of missing fragments),
is to impute the missing parts of the run-off triangle by the most
similar segments—triangle rows that can be found among the already
observed development profiles. The name reflects the fact that the
imputation of missing segments in unobserved functional development
profiles is always performed in a parallel way using the observed
fragments.</p>
<p>To illustrate the principle, we use the Cameron Mutual data first.
The run-off triangle provides also the “unknown” future outcomes
(functional profile segments that are supposed to be predicted by the
algorithm). However, typical information used in the actuarial practice
(for claims reserving and reserve prediction) would be of the run-off
triangle form as</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/observed.html">observed</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       dev</span></span>
<span><span class="co">## origin    1     2     3     4     5     6     7     8     9    10</span></span>
<span><span class="co">##     1  5244  9228 10823 11352 11791 12082 12120 12199 12215 12215</span></span>
<span><span class="co">##     2  5984  9939 11725 12346 12746 12909 13034 13109 13113    NA</span></span>
<span><span class="co">##     3  7452 12421 14171 14752 15066 15354 15637 15720    NA    NA</span></span>
<span><span class="co">##     4  7115 11117 12488 13274 13662 13859 13872    NA    NA    NA</span></span>
<span><span class="co">##     5  5753  8969  9917 10697 11135 11282    NA    NA    NA    NA</span></span>
<span><span class="co">##     6  3937  6524  7989  8543  8757    NA    NA    NA    NA    NA</span></span>
<span><span class="co">##     7  5127  8212  8976  9325    NA    NA    NA    NA    NA    NA</span></span>
<span><span class="co">##     8  5046  8006  8984    NA    NA    NA    NA    NA    NA    NA</span></span>
<span><span class="co">##     9  5129  8202    NA    NA    NA    NA    NA    NA    NA    NA</span></span>
<span><span class="co">##     10 3689    NA    NA    NA    NA    NA    NA    NA    NA    NA</span></span></code></pre>
<p>A fancy print option is also implemented in the
<code>ProfileLadder</code> package to visually distinguish between the
data part that is typically available at the time of the reserve
prediction and the data that are provided ex-post for some evaluation
purposes. This can be set or altered (in the interactive environments
only) by</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>profileLadder.fancy <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> </span>
<span><span class="fu"><a href="../reference/set.fancy.print.html">set.fancy.print</a></span><span class="op">(</span><span class="op">)</span> <span class="co">## custom-defined colors</span></span></code></pre></div>
<p>The prediction of the future claims performed by the PARALLAX
algorithm is obtained as</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">parallax.cameron</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parallelReserve.html">parallelReserve</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## PARALLAX Reserving </span></span>
<span><span class="co">##     Estimated Reserve    Estimated Ultimate           Paid Amount </span></span>
<span><span class="co">##                  8540                113699                105159 </span></span>
<span><span class="co">##          True Reserve </span></span>
<span><span class="co">##                  7963</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">PARALLAX method (functional profile completion)</span></span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #3A3A3A;">5244</span>     <span style="color: #3A3A3A;"> 9228</span>   <span style="color: #3A3A3A;">10823</span>   <span style="color: #3A3A3A;">11352</span>   <span style="color: #3A3A3A;">11791</span>   <span style="color: #3A3A3A;">12082</span>   <span style="color: #3A3A3A;">12120</span>   <span style="color: #3A3A3A;">12199</span>   <span style="color: #3A3A3A;">12215</span>   <span style="color: #3A3A3A;">12215</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5984</span>     <span style="color: #3A3A3A;"> 9939</span>   <span style="color: #3A3A3A;">11725</span>   <span style="color: #3A3A3A;">12346</span>   <span style="color: #3A3A3A;">12746</span>   <span style="color: #3A3A3A;">12909</span>   <span style="color: #3A3A3A;">13034</span>   <span style="color: #3A3A3A;">13109</span>   <span style="color: #3A3A3A;">13113</span>   <span style="color: #D700D7;">13113</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">7452</span>     <span style="color: #3A3A3A;">12421</span>   <span style="color: #3A3A3A;">14171</span>   <span style="color: #3A3A3A;">14752</span>   <span style="color: #3A3A3A;">15066</span>   <span style="color: #3A3A3A;">15354</span>   <span style="color: #3A3A3A;">15637</span>   <span style="color: #3A3A3A;">15720</span>   <span style="color: #D700D7;">15724</span>   <span style="color: #D700D7;">15724</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">7115</span>     <span style="color: #3A3A3A;">11117</span>   <span style="color: #3A3A3A;">12488</span>   <span style="color: #3A3A3A;">13274</span>   <span style="color: #3A3A3A;">13662</span>   <span style="color: #3A3A3A;">13859</span>   <span style="color: #3A3A3A;">13872</span>   <span style="color: #D700D7;">13947</span>   <span style="color: #D700D7;">13951</span>   <span style="color: #D700D7;">13951</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5753</span>     <span style="color: #3A3A3A;"> 8969</span>   <span style="color: #3A3A3A;"> 9917</span>   <span style="color: #3A3A3A;">10697</span>   <span style="color: #3A3A3A;">11135</span>   <span style="color: #3A3A3A;">11282</span>   <span style="color: #D700D7;">11320</span>   <span style="color: #D700D7;">11399</span>   <span style="color: #D700D7;">11415</span>   <span style="color: #D700D7;">11415</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">3937</span>     <span style="color: #3A3A3A;"> 6524</span>   <span style="color: #3A3A3A;"> 7989</span>   <span style="color: #3A3A3A;"> 8543</span>   <span style="color: #3A3A3A;"> 8757</span>   <span style="color: #D700D7;"> 8904</span>   <span style="color: #D700D7;"> 8942</span>   <span style="color: #D700D7;"> 9021</span>   <span style="color: #D700D7;"> 9037</span>   <span style="color: #D700D7;"> 9037</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5127</span>     <span style="color: #3A3A3A;"> 8212</span>   <span style="color: #3A3A3A;"> 8976</span>   <span style="color: #3A3A3A;"> 9325</span>   <span style="color: #D700D7;"> 9539</span>   <span style="color: #D700D7;"> 9686</span>   <span style="color: #D700D7;"> 9724</span>   <span style="color: #D700D7;"> 9803</span>   <span style="color: #D700D7;"> 9819</span>   <span style="color: #D700D7;"> 9819</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5046</span>     <span style="color: #3A3A3A;"> 8006</span>   <span style="color: #3A3A3A;"> 8984</span>   <span style="color: #D700D7;"> 9333</span>   <span style="color: #D700D7;"> 9547</span>   <span style="color: #D700D7;"> 9694</span>   <span style="color: #D700D7;"> 9732</span>   <span style="color: #D700D7;"> 9811</span>   <span style="color: #D700D7;"> 9827</span>   <span style="color: #D700D7;"> 9827</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5129</span>     <span style="color: #3A3A3A;"> 8202</span>   <span style="color: #D700D7;"> 8966</span>   <span style="color: #D700D7;"> 9315</span>   <span style="color: #D700D7;"> 9529</span>   <span style="color: #D700D7;"> 9676</span>   <span style="color: #D700D7;"> 9714</span>   <span style="color: #D700D7;"> 9793</span>   <span style="color: #D700D7;"> 9809</span>   <span style="color: #D700D7;"> 9809</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">3689</span>     <span style="color: #D700D7;"> 6276</span>   <span style="color: #D700D7;"> 7741</span>   <span style="color: #D700D7;"> 8295</span>   <span style="color: #D700D7;"> 8509</span>   <span style="color: #D700D7;"> 8656</span>   <span style="color: #D700D7;"> 8694</span>   <span style="color: #D700D7;"> 8773</span>   <span style="color: #D700D7;"> 8789</span>   <span style="color: #D700D7;"> 8789</span>   </span></span></code></pre>
<p>As far as the input data also contains “unknown” future developments,
the output above also provides the amount of the true reserve
(<code>7963</code> – which is not printed otherwise). Standard summary
method can be applied to the output of the
<code><a href="../reference/parallelReserve.html">parallelReserve()</a></code> function – the S3 object of the class
<code>ProfileLadder</code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">parallax.cameron</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## PARALLAX reserve prediction (by origins)</span></span>
<span><span class="co">##       First Latest Dev.To.Date Ultimate IBNR</span></span>
<span><span class="co">## 2      5984  13113   1.0000000    13113    0</span></span>
<span><span class="co">## 3      7452  15720   0.9997456    15724    4</span></span>
<span><span class="co">## 4      7115  13872   0.9943373    13951   79</span></span>
<span><span class="co">## 5      5753  11282   0.9883487    11415  133</span></span>
<span><span class="co">## 6      3937   8757   0.9690163     9037  280</span></span>
<span><span class="co">## 7      5127   9325   0.9496894     9819  494</span></span>
<span><span class="co">## 8      5046   8984   0.9142159     9827  843</span></span>
<span><span class="co">## 9      5129   8202   0.8361709     9809 1607</span></span>
<span><span class="co">## 10     3689   3689   0.4197292     8789 5100</span></span>
<span><span class="co">## total 49232  92944   0.9158488   101484 8540</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Overall reserve summary</span></span></span></code></pre>
<pre><code><span><span class="co">##     Est.Reserve    Est.Ultimate     Paid Amount    True Reserve        Reserve% </span></span>
<span><span class="co">##         8540.00       113699.00       105159.00         7963.00            7.25</span></span></code></pre>
<p>The summary output above is analogous to the output provided by
parametric reserving methods implemented in <code>ChainLadder</code>.
For example, considering a typical benchmark over-dispersed Poisson
model (ODP) implemented in <code><a href="http://mages.github.io/ChainLadder/reference/glmReserve.html" class="external-link">glmReserve()</a></code> from the R package
<code>ChainLadder</code>, the following summary output is provided:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="http://mages.github.io/ChainLadder/reference/glmReserve.html" class="external-link">glmReserve</a></span><span class="op">(</span><span class="fu"><a href="../reference/observed.html">observed</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       Latest Dev.To.Date Ultimate IBNR          S.E        CV</span></span>
<span><span class="co">## 2      13113   1.0000000    13113    0   0.01035287       Inf</span></span>
<span><span class="co">## 3      15720   0.9992372    15732   12  29.38975320 2.4491461</span></span>
<span><span class="co">## 4      13872   0.9934116    13964   92  73.46098788 0.7984890</span></span>
<span><span class="co">## 5      11282   0.9850694    11453  171  96.26787355 0.5629700</span></span>
<span><span class="co">## 6       8757   0.9688019     9039  282 120.58781735 0.4276164</span></span>
<span><span class="co">## 7       9325   0.9397360     9923  598 177.57019068 0.2969401</span></span>
<span><span class="co">## 8       8984   0.8905630    10088 1104 246.00693847 0.2228324</span></span>
<span><span class="co">## 9       8202   0.7789914    10529 2327 379.54811405 0.1631062</span></span>
<span><span class="co">## 10      3689   0.4788422     7704 4015 622.22022041 0.1549739</span></span>
<span><span class="co">## total  92944   0.9152986   101545 8601 880.66723938 0.1023913</span></span></code></pre>
<p>Due to obvious analogy between the outputs from the nonparametric
reserving method (‘parallelReserve()’) and the standard parametric
approach (<code><a href="http://mages.github.io/ChainLadder/reference/glmReserve.html" class="external-link">glmReserve()</a></code>) we omit further interpretation of
the whole output and we only focuss on differences.</p>
<div style="border: 1px solid #66a3ff; background-color: #eeeeee; padding: 10px; border-radius: 5px;">
<p>
</p>
<p><strong>Note:</strong> The outout from the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>
method applied to the S3 class object <code>profileLadder</code>
produced by the <code><a href="../reference/parallelReserve.html">parallelReserve()</a></code> function from the R
package <code>ProfileLadder</code> shares the same layout as the summary
method applied to the classical parametric reserving methods from the
<strong>R</strong> package <code>ChainLadder</code> In the example
above, the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method is applied to the object of the
class <code>glmReserve</code> produced by <code><a href="http://mages.github.io/ChainLadder/reference/glmReserve.html" class="external-link">glmReserve()</a></code>.</p>
<p>Note, that the <code>First</code> column is only given in the output
for the nonparametric reserving method (<code>ProfileLadder</code>
package) while the columns denoted as <code>S.E</code> and
<code>CV</code> are only available for the parametric approach
(<code>ChainLadder</code> package). This is due to the fact that the ODP
model is based on a specific distributional assumption and, therefore,
standard errors (<code>S.E</code>) and the coefficient of variation
(<code>CV</code>) can be both directly obtained. The nonparametric
PARALLAX algorithm is, however, model-free and, therefore, the point
prediction of the reserve is provided only (unless a bootstrap
resampling add-on is used – see Section 5).</p>
<p>On the other hand, the summary for PARALLAX gives important
information about the origin stability – which is, in practice, very
often accessed from the first run-off triangle column.</p>
Some additional information is also provided in the second part of the
output. In particular, beside the predicted reserve
(<code>Est.Reserve</code>) and the predicted ultimates
(<code>Est.Ultimate</code>), there is also the sum of the running
diagonal provided (<code>Paid Amount</code>). In addition, if the
run-off triangle is accompanied with the true future outcomes, then the
true reserve and the prediction accuracy in terms of the ratio of the
predicted amount and the true value are both provided.

</div>
<p>If the same reserving method is applied to the Casco insurance data
(i.e., incomple run-off triangle profiles) the summary output is very
similar but some values are missing in the outputs (<code>NA</code>s are
provided instead):</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">parallax.casco</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parallelReserve.html">parallelReserve</a></span><span class="op">(</span><span class="va">casco</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">parallax.casco</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## PARALLAX reserve prediction (by origins)</span></span>
<span><span class="co">##          First   Latest Dev.To.Date Ultimate   IBNR</span></span>
<span><span class="co">## 2       423582   522003   1.0001360   521932    -71</span></span>
<span><span class="co">## 3       373866   485984   1.0002882   485844   -140</span></span>
<span><span class="co">## 4       441769   557049   1.0003089   556877   -172</span></span>
<span><span class="co">## 5       503292   630271   1.0004286   630001   -270</span></span>
<span><span class="co">## 6       554625   701433   1.0004250   701135   -298</span></span>
<span><span class="co">## 7       613011   758233   1.0003932   757935   -298</span></span>
<span><span class="co">## 8       605922   761068   1.0004312   760740   -328</span></span>
<span><span class="co">## 9       555154   670158   1.0005285   669804   -354</span></span>
<span><span class="co">## 10      514900   626112   1.0006025   625735   -377</span></span>
<span><span class="co">## 11      581196   708428   1.0006116   707995   -433</span></span>
<span><span class="co">## 12      613266   781561   1.0007273   780993   -568</span></span>
<span><span class="co">## 13      706120   894514   1.0008134   893787   -727</span></span>
<span><span class="co">## 14      859707  1059593   0.9981179  1061591   1998</span></span>
<span><span class="co">## 15      951189  1207771   0.9966341  1211850   4079</span></span>
<span><span class="co">## 16     1061511  1317965   0.9890660  1332535  14570</span></span>
<span><span class="co">## 17     1121591  1121591   0.8053848  1392615 271024</span></span>
<span><span class="co">## total 10480701 12803734   0.9780287 13091369 287635</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Overall reserve summary</span></span></span></code></pre>
<pre><code><span><span class="co">##     Est.Reserve    Est.Ultimate     Paid Amount    True Reserve        Reserve% </span></span>
<span><span class="co">##          287635        13780866        13493231              NA              NA</span></span></code></pre>
<p>Beside the reserve prediction
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>R</mi><mo accent="true">̂</mo></mover><mo>=</mo><mn>287635</mn></mrow><annotation encoding="application/x-tex">\widehat{R} = 287635</annotation></semantics></math>
(given in thousands CZK) there is also an information about the
estimated ultimate payments (the sum of the last column in the completed
run-off triangle), and the summary of the claims being already paid—
<code>Paid Amount</code>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>13</mn><mn>493</mn><mn>231</mn></mrow><annotation encoding="application/x-tex">13 493 231</annotation></semantics></math>
(again in thousands CZK). Note that last two values in the output are
denoted as <code>NA</code> because the future outcomes are not available
for the given run-off triangle. Both predictions can be directly
visualized using the S3 method <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">parallax.cameron</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">parallax.casco</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-14-1.png" class="r-plt" alt="" width="98%"></p>
<p>In general, the output of the <code><a href="../reference/parallelReserve.html">parallelReserve()</a></code> function
is a list of the S3 method class <code>profileLadder</code> with the
following elements:</p>
<ul>
<li><p><code>$reserve</code> – a numeric vector with four quantities:
<code>Paid Amount</code> gives the overall claim payments being already
settled by the insurance company – the sum of the last observed diagona,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\sum_{i = 1}^n Y_{i, n - i + 1}</annotation></semantics></math>;
<code>Estimated Ultimate</code> states for the predicted total amount of
claim payment – the sum of the last column in the completed run-off
triangle,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mover><mi>Y</mi><mo accent="true">̂</mo></mover><mrow><mi>i</mi><mo>,</mo><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\sum_{i = 1}^n \widehat{Y}_{i, n}</annotation></semantics></math>;
<code>Estimated Reserve</code> gives the point prediction of the reserve
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mi>R</mi><mo accent="true">̂</mo></mover><annotation encoding="application/x-tex">\widehat{{R}}</annotation></semantics></math>
– defined as the difference
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mover><mi>Y</mi><mo accent="true">̂</mo></mover><mrow><mi>i</mi><mo>,</mo><mi>n</mi></mrow></msub><mo>−</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>Y</mi><mrow><mi>i</mi><mo>,</mo><mi>n</mi><mo>−</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">\sum_{i = 1}^n \widehat{Y}_{i, n} - \sum_{i = 1}^n Y_{i, n - i + 1}</annotation></semantics></math>;
Finally, <code>True Reserve</code> provides the true value of the
reserve if such information is available;</p></li>
<li><p><code>$method</code> – type of the prediction algorithm being
used to complete the run-off triangle and to give the point prediction
of the reserve (<code>PARALLAX</code>, <code>REACT</code>, or
<code>MACRAME</code>);</p></li>
<li><p><code>$Triangle</code> – the input run-off triangle;</p></li>
<li><p><code>$FullTriangle</code> – the completed run-off triangle – a
full
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n \times n</annotation></semantics></math>
square;</p></li>
<li><p><code>$trueComplete</code> – the true run-off triangle – if
available.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="react">3. REACT<a class="anchor" aria-label="anchor" href="#react"></a>
</h2>
<p>The REACT algorithm (approximation by the most
<strong>RE</strong>cent <strong>AC</strong>ciden<strong>T</strong> year)
is implemented within the same <strong>R</strong> function as the
PARALLAX algorithm—the <code><a href="../reference/parallelReserve.html">parallelReserve()</a></code> function with an
additional parameter <code>method = "react"</code> being specified. In
addition to the choice of the REACT algorithm, the following
<strong>R</strong> code also asks for the residuals, that should be
provided in the output. The same option (with the same functionality)
also applies for the PARALLAX algorithm (although it was not mentioned
in the section above).</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">react.cameron</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parallelReserve.html">parallelReserve</a></span><span class="op">(</span><span class="va">cameron</span>, method <span class="op">=</span> <span class="st">"react"</span>, residuals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">react.cameron</span>, plotOption <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## REACT reserve prediction (by origins)</span></span>
<span><span class="co">##       First Latest Dev.To.Date Ultimate IBNR</span></span>
<span><span class="co">## 2      5984  13113   1.0000000    13113    0</span></span>
<span><span class="co">## 3      7452  15720   0.9997456    15724    4</span></span>
<span><span class="co">## 4      7115  13872   0.9937675    13959   87</span></span>
<span><span class="co">## 5      5753  11282   0.9912142    11382  100</span></span>
<span><span class="co">## 6      3937   8757   0.9725677     9004  247</span></span>
<span><span class="co">## 7      5127   9325   0.9528919     9786  461</span></span>
<span><span class="co">## 8      5046   8984   0.9172963     9794  810</span></span>
<span><span class="co">## 9      5129   8202   0.8210210     9990 1788</span></span>
<span><span class="co">## 10     3689   3689   0.4314620     8550 4861</span></span>
<span><span class="co">## total 49232  92944   0.9174942   101302 8358</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Overall reserve summary</span></span></span></code></pre>
<pre><code><span><span class="co">##     Est.Reserve    Est.Ultimate     Paid Amount    True Reserve        Reserve% </span></span>
<span><span class="co">##         8358.00       113517.00       105159.00         7963.00            4.96</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Residual summary (standard incremental residuals)</span></span></span></code></pre>
<pre><code><span><span class="co">##      Min   1st Q.   Median     Mean   3rd Q.      Max  Std.Er. </span></span>
<span><span class="co">##     -719      -49       -1       -9       34      300      143 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Total number of residuals: 45,  Total number of unique residuals: 41</span></span>
<span><span class="co">## Suspicious residuals (using 2σ rule): 2,  Outliers (3σ rule): 1</span></span></code></pre>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-15-1.png" class="r-plt" alt="" width="98%"></p>
<p>Unlike the output from the PARALLAX algorithm, there is an additional
information about the incremental residuals provided in the output from
REACT. Residuals are typically used by actuaries to evaluate the
performance of the prediction. The residuals are available from the
corresponding list item <code>$residulas</code> (which is provided in
the output—the object of the class <code>profileLadder</code>—if the
residuals are selected, i.e., <code>residuals = TRUE</code>). The
residuals are defined as differences between true incremental payments
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">X_{i,j}</annotation></semantics></math>
and the predicted ones _{i,j}$ and they can be also printed within the
triangle as</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">react.cameron</span><span class="op">$</span><span class="va">residuals</span></span></code></pre></div>
<pre><code><span><span class="co">##       dev</span></span>
<span><span class="co">## origin  1    2    3   4    5    6   7   8   9  10</span></span>
<span><span class="co">##     1  NA   NA   NA  NA   NA   NA  NA  NA  NA  NA</span></span>
<span><span class="co">##     2  NA   NA   NA  NA   NA   NA  NA  NA  NA   2</span></span>
<span><span class="co">##     3  NA   NA   NA  NA   NA   NA  NA  NA  20  42</span></span>
<span><span class="co">##     4  NA   NA   NA  NA   NA   NA  NA -20  34  -1</span></span>
<span><span class="co">##     5  NA   NA   NA  NA   NA   NA -40  -7  -3  22</span></span>
<span><span class="co">##     6  NA   NA   NA  NA   NA   -3  99 -84  30 118</span></span>
<span><span class="co">##     7  NA   NA   NA  NA  179  -70  25 -31 -73  -1</span></span>
<span><span class="co">##     8  NA   NA   NA 300  255  -83  82 -92  -4   0</span></span>
<span><span class="co">##     9  NA   NA    5 147   56  -65  87 -34  -4   1</span></span>
<span><span class="co">##     10 NA -719 -232 -49 -139 -114  43 -69  -5   0</span></span></code></pre>
<p>If there are no residuals provided in the output (i.e.,
<code>residuals = FALSE</code>) and the graphical option is set to
<code>plotOption = TRUE</code>, then slightly different figure (with the
prediction summary in terms of a barplot) is provided:</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/parallelReserve.html">parallelReserve</a></span><span class="op">(</span><span class="va">cameron</span>, method <span class="op">=</span> <span class="st">"react"</span><span class="op">)</span>, plotOption <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## REACT reserve prediction (by origins)</span></span>
<span><span class="co">##       First Latest Dev.To.Date Ultimate IBNR</span></span>
<span><span class="co">## 2      5984  13113   1.0000000    13113    0</span></span>
<span><span class="co">## 3      7452  15720   0.9997456    15724    4</span></span>
<span><span class="co">## 4      7115  13872   0.9937675    13959   87</span></span>
<span><span class="co">## 5      5753  11282   0.9912142    11382  100</span></span>
<span><span class="co">## 6      3937   8757   0.9725677     9004  247</span></span>
<span><span class="co">## 7      5127   9325   0.9528919     9786  461</span></span>
<span><span class="co">## 8      5046   8984   0.9172963     9794  810</span></span>
<span><span class="co">## 9      5129   8202   0.8210210     9990 1788</span></span>
<span><span class="co">## 10     3689   3689   0.4314620     8550 4861</span></span>
<span><span class="co">## total 49232  92944   0.9174942   101302 8358</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Overall reserve summary</span></span></span></code></pre>
<pre><code><span><span class="co">##     Est.Reserve    Est.Ultimate     Paid Amount    True Reserve        Reserve% </span></span>
<span><span class="co">##         8358.00       113517.00       105159.00         7963.00            4.96</span></span></code></pre>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-17-1.png" class="r-plt" alt="" width="98%"></p>
<br><div style="border: 1px solid #66a3ff; background-color: #eeeeee; padding: 10px; border-radius: 5px;">
<p>
</p>
<p><strong>Note:</strong> There are two sets of residuals typically used
by actuaries and both of them can be provided in the output of the
<code><a href="../reference/parallelReserve.html">parallelReserve()</a></code> function. Either standard residuals in
terms of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>−</mo><msub><mover><mi>X</mi><mo accent="true">̂</mo></mover><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">X_{i,j} - \widehat{X}_{i,j}</annotation></semantics></math>
are provided if the “future” (unknown) increments are available (for
instance, for some retrospective back-testing or validation purposes)
or, alternatively, so-called “back-fitted” residuals are calculated
instead.</p>
<p>The main idea behind the back-fitted residuals is to flip the
completed triangle, transform it back to the run-off triangle by
deleting the lower triangularpart, and to use such run-off triangle as
an~input to back-predict the run-off triangle by applying the same
estimation procedure in<sub>a</sub>reverse manner so to say. Formally,
the flipped matrix is a transposition with respect to the second
diagonal—mathematically expressed, for a completed square
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mover><mi>Y</mi><mo accent="true">̂</mo></mover><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>;</mo><mspace width="0.222em"></mspace><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>;</mo><mi>j</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\{\widehat{Y}_{i,j};~i = 1, \dots, n; j = 1, \dots, n\}</annotation></semantics></math>,
the “flipped triangle” is the square
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mover><mi>Y</mi><mo accent="true">̃</mo></mover><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>;</mo><mspace width="0.222em"></mspace><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>;</mo><mi>j</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\{\widetilde{Y}_{i,j};~i= 1, \dots, n; j = 1, \dots, n\}</annotation></semantics></math>,
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover><mi>Y</mi><mo accent="true">̃</mo></mover><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>=</mo><msub><mover><mi>Y</mi><mo accent="true">̂</mo></mover><mrow><mi>n</mi><mo>+</mo><mn>1</mn><mo>−</mo><mi>i</mi><mo>,</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo>−</mo><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\widetilde{Y}_{i,j} = \widehat{Y}_{n + 1 - i, n + 1 - j}</annotation></semantics></math>.</p>
<p>For illustration, and differences between the standard incremental
residuals and the back-fitted residuals (that are more common in claims
reserving practice), compare the following two outputs:</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">### standard residuals for a fully observed square</span></span>
<span><span class="fu"><a href="../reference/parallelReserve.html">parallelReserve</a></span><span class="op">(</span><span class="va">cameron</span>, method <span class="op">=</span> <span class="st">"react"</span>, residuals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">residuals</span>  </span>
<span></span>
<span><span class="co">### backfitted residuals for the observed run-off triangle only</span></span>
<span><span class="fu"><a href="../reference/parallelReserve.html">parallelReserve</a></span><span class="op">(</span><span class="fu"><a href="../reference/observed.html">observed</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span>, method <span class="op">=</span> <span class="st">"react"</span>, residuals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">$</span><span class="va">residuals</span></span></code></pre></div>

</div>
</div>
<div class="section level2">
<h2 id="macrame">4. MACRAME<a class="anchor" aria-label="anchor" href="#macrame"></a>
</h2>
<p>The idea of the MACRAME algorithm (<strong>MA</strong>rkov
<strong>C</strong>hain f<strong>RA</strong>g<strong>ME</strong>nt
approximation) is to utilize a homogeneous Markov chain (MC) model to
obtain the reserve prediction. This strategy is slightly different and
more complex than the previous two; despite its additional mathematical
complexity, however, it is quite intuitive and can be seen as a complex
but rigorous generalization of the previous two algorithms described
above. The underlying stochastic model invites additional user-defined
adjustments and practically oriented modifications.</p>
<p>Unlike the previous two algorithms, MACRAME is based on the
incremental run-off triangle. In the first step, the algorithm
transforms the incremental payments
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>;</mo><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>;</mo><mi>j</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo>−</mo><mi>i</mi><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\{X_{i,j}; i = 1, \dots, n; j = 1, \dots, n + 1 - i\}</annotation></semantics></math>
into a finite set of states of a homogeneous Markov chain,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mo stretchy="false" form="prefix">{</mo><msub><mi>s</mi><mn>1</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>s</mi><mi>m</mi></msub><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">{S} = \{s_1, \dots, s_m\}</annotation></semantics></math>,
and the observed run-off triangle is used to estimate the matrix of the
corresponding transition probabilities
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ℙ</mi><mo>=</mo><mo minsize="1.2" maxsize="1.2" stretchy="false" form="prefix">(</mo><mi>p</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>s</mi><msub><mi>ι</mi><mn>1</mn></msub></msub><mo>,</mo><msub><mi>s</mi><msub><mi>ι</mi><mn>2</mn></msub></msub><mo stretchy="true" form="postfix">)</mo></mrow><msubsup><mo minsize="1.2" maxsize="1.2" stretchy="false" form="postfix">)</mo><mrow><msub><mi>ι</mi><mn>1</mn></msub><mo>=</mo><mn>1</mn><mo>,</mo><msub><mi>ι</mi><mn>2</mn></msub><mo>=</mo><mn>1</mn></mrow><mrow><mrow><mo stretchy="true" form="prefix">|</mo><mi>S</mi><mo stretchy="true" form="postfix">|</mo></mrow><mo>,</mo><mrow><mo stretchy="true" form="prefix">|</mo><mi>S</mi><mo stretchy="true" form="postfix">|</mo></mrow></mrow></msubsup></mrow><annotation encoding="application/x-tex">\mathbb{P} = \big(p(s_{\iota_1}, s_{\iota_2})\big)_{\iota_1 = 1, \iota_2 = 1}^{|{S}|, |{S}|}</annotation></semantics></math>,
for
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>s</mi><msub><mi>ι</mi><mn>1</mn></msub></msub><mo>,</mo><msub><mi>s</mi><msub><mi>ι</mi><mn>2</mn></msub></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>𝖯</mi><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>U</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>s</mi><msub><mi>ι</mi><mn>2</mn></msub></msub><mo stretchy="false" form="prefix">|</mo><msub><mi>U</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>=</mo><msub><mi>s</mi><msub><mi>ι</mi><mn>1</mn></msub></msub><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">p(s_{\iota_1}, s_{\iota_2}) = \mathsf{P}[U_{i, j + 1} = s_{\iota_2} | U_{i, j} = s_{\iota_1}]</annotation></semantics></math>
where the increment
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">X_{i, j}</annotation></semantics></math>
is represented by the Markov state from
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>S</mi><annotation encoding="application/x-tex">{S}</annotation></semantics></math>
that is taken by
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>U</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">U_{i,j}</annotation></semantics></math>.
Thus, there are three pivots behind the MACRAME algorithm:</p>
<ul>
<li>
<strong>Break points</strong> – the set of points
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mi>∞</mi><mo>=</mo><msub><mi>g</mi><mn>0</mn></msub><mo>&lt;</mo><msub><mi>g</mi><mn>1</mn></msub><mo>&lt;</mo><mi>…</mi><mo>&lt;</mo><msub><mi>g</mi><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>&lt;</mo><msub><mi>g</mi><mi>m</mi></msub><mo>=</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">- \infty = g_0 &lt; g_1 &lt; \dots &lt; g_{m - 1} &lt; g_m = \infty</annotation></semantics></math>;</li>
<li>
<strong>Markov states</strong> – the set of points
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mo stretchy="false" form="prefix">{</mo><msub><mi>s</mi><mn>1</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>s</mi><mi>m</mi></msub><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">S = \{s_1, \dots, s_m\}</annotation></semantics></math>,
where, typically,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>=</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">m = n</annotation></semantics></math>;</li>
<li>
<strong>Transition matrix</strong> – the matrix
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ℙ</mi><mo>=</mo><mo minsize="1.2" maxsize="1.2" stretchy="false" form="prefix">(</mo><mi>p</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>s</mi><msub><mi>ι</mi><mn>1</mn></msub></msub><mo>,</mo><msub><mi>s</mi><msub><mi>ι</mi><mn>2</mn></msub></msub><mo stretchy="true" form="postfix">)</mo></mrow><msubsup><mo minsize="1.2" maxsize="1.2" stretchy="false" form="postfix">)</mo><mrow><msub><mi>ι</mi><mn>1</mn></msub><mo>=</mo><mn>1</mn><mo>,</mo><msub><mi>ι</mi><mn>2</mn></msub><mo>=</mo><mn>1</mn></mrow><mrow><mrow><mo stretchy="true" form="prefix">|</mo><mi>S</mi><mo stretchy="true" form="postfix">|</mo></mrow><mo>,</mo><mrow><mo stretchy="true" form="prefix">|</mo><mi>S</mi><mo stretchy="true" form="postfix">|</mo></mrow></mrow></msubsup></mrow><annotation encoding="application/x-tex">\mathbb{P} = \big(p(s_{\iota_1}, s_{\iota_2})\big)_{\iota_1 = 1, \iota_2 = 1}^{|{S}|, |{S}|}</annotation></semantics></math>
with the corresponding estimates for the probabilities of transitions
between the states.</li>
</ul>
<p>The MACRAME algorithm is implemented in the <strong>R</strong>
function <code><a href="../reference/mcReserve.html">mcReserve()</a></code> (from the <code>ProfileLadder</code>
package) using a similar scope as the <code>parallelResrve()</code>
function discussed above. The run-off triangle completion and the
reserve prediction obtained by the DEFAULT (data-driven) verion of the
MACRAME algorithm can be obtained by running</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">macrame.cameron</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## MACRAME Reserving </span></span>
<span><span class="co">##     Estimated Reserve    Estimated Ultimate           Paid Amount </span></span>
<span><span class="co">##              8081.963            113240.963            105159.000 </span></span>
<span><span class="co">##          True Reserve </span></span>
<span><span class="co">##              7963.000</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">MACRAME method (functional profile completion)</span></span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #3A3A3A;">5244</span>     <span style="color: #3A3A3A;"> 9228</span>   <span style="color: #3A3A3A;">10823</span>   <span style="color: #3A3A3A;">11352</span>   <span style="color: #3A3A3A;">11791</span>   <span style="color: #3A3A3A;">12082</span>   <span style="color: #3A3A3A;">12120</span>   <span style="color: #3A3A3A;">12199</span>   <span style="color: #3A3A3A;">12215</span>   <span style="color: #3A3A3A;">12215</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5984</span>     <span style="color: #3A3A3A;"> 9939</span>   <span style="color: #3A3A3A;">11725</span>   <span style="color: #3A3A3A;">12346</span>   <span style="color: #3A3A3A;">12746</span>   <span style="color: #3A3A3A;">12909</span>   <span style="color: #3A3A3A;">13034</span>   <span style="color: #3A3A3A;">13109</span>   <span style="color: #3A3A3A;">13113</span>   <span style="color: #D700D7;">13160</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">7452</span>     <span style="color: #3A3A3A;">12421</span>   <span style="color: #3A3A3A;">14171</span>   <span style="color: #3A3A3A;">14752</span>   <span style="color: #3A3A3A;">15066</span>   <span style="color: #3A3A3A;">15354</span>   <span style="color: #3A3A3A;">15637</span>   <span style="color: #3A3A3A;">15720</span>   <span style="color: #D700D7;">15756</span>   <span style="color: #D700D7;">15799</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">7115</span>     <span style="color: #3A3A3A;">11117</span>   <span style="color: #3A3A3A;">12488</span>   <span style="color: #3A3A3A;">13274</span>   <span style="color: #3A3A3A;">13662</span>   <span style="color: #3A3A3A;">13859</span>   <span style="color: #3A3A3A;">13872</span>   <span style="color: #D700D7;">13919</span>   <span style="color: #D700D7;">13960</span>   <span style="color: #D700D7;">14003</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5753</span>     <span style="color: #3A3A3A;"> 8969</span>   <span style="color: #3A3A3A;"> 9917</span>   <span style="color: #3A3A3A;">10697</span>   <span style="color: #3A3A3A;">11135</span>   <span style="color: #3A3A3A;">11282</span>   <span style="color: #D700D7;">11340</span>   <span style="color: #D700D7;">11380</span>   <span style="color: #D700D7;">11422</span>   <span style="color: #D700D7;">11464</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">3937</span>     <span style="color: #3A3A3A;"> 6524</span>   <span style="color: #3A3A3A;"> 7989</span>   <span style="color: #3A3A3A;"> 8543</span>   <span style="color: #3A3A3A;"> 8757</span>   <span style="color: #D700D7;"> 8815</span>   <span style="color: #D700D7;"> 8855</span>   <span style="color: #D700D7;"> 8897</span>   <span style="color: #D700D7;"> 8939</span>   <span style="color: #D700D7;"> 8982</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5127</span>     <span style="color: #3A3A3A;"> 8212</span>   <span style="color: #3A3A3A;"> 8976</span>   <span style="color: #3A3A3A;"> 9325</span>   <span style="color: #D700D7;"> 9496</span>   <span style="color: #D700D7;"> 9588</span>   <span style="color: #D700D7;"> 9646</span>   <span style="color: #D700D7;"> 9693</span>   <span style="color: #D700D7;"> 9737</span>   <span style="color: #D700D7;"> 9780</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5046</span>     <span style="color: #3A3A3A;"> 8006</span>   <span style="color: #3A3A3A;"> 8984</span>   <span style="color: #D700D7;"> 9677</span>   <span style="color: #D700D7;">10157</span>   <span style="color: #D700D7;">10458</span>   <span style="color: #D700D7;">10641</span>   <span style="color: #D700D7;">10759</span>   <span style="color: #D700D7;">10840</span>   <span style="color: #D700D7;">10902</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5129</span>     <span style="color: #3A3A3A;"> 8202</span>   <span style="color: #D700D7;"> 9244</span>   <span style="color: #D700D7;"> 9808</span>   <span style="color: #D700D7;">10165</span>   <span style="color: #D700D7;">10376</span>   <span style="color: #D700D7;">10502</span>   <span style="color: #D700D7;">10586</span>   <span style="color: #D700D7;">10649</span>   <span style="color: #D700D7;">10701</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">3689</span>     <span style="color: #D700D7;"> 4731</span>   <span style="color: #D700D7;"> 5295</span>   <span style="color: #D700D7;"> 5652</span>   <span style="color: #D700D7;"> 5863</span>   <span style="color: #D700D7;"> 5989</span>   <span style="color: #D700D7;"> 6073</span>   <span style="color: #D700D7;"> 6136</span>   <span style="color: #D700D7;"> 6188</span>   <span style="color: #D700D7;"> 6236</span>   </span></span></code></pre>
<p>The output of the MACRAME algorithm is again the S3 class object
<code>profileLadder</code> and, thus, the same S3 methods as before can
be applied again (in particuler, the following S3 methods are available:
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>, <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, and <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>).
The performance of all three nonparametric prediction algorithms
(PARALLAX, REACT, and MACRAME) can be quantitatively and visually
compared (using the Cameron Mutual dataset).</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### PARALLAX reserve prediction and run-off completion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/parallelReserve.html">parallelReserve</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### REACT reserve prediction and run-off completion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/parallelReserve.html">parallelReserve</a></span><span class="op">(</span><span class="va">cameron</span>, method <span class="op">=</span> <span class="st">"react"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### MACRAME reserve prediction and run-off completion</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-20-1.png" class="r-plt" alt="" width="98%"></p>
<p>The red curve segments represent the predicted profile completions.
The blue solid lines represent the available data—the underlyhing
run-off triangle and the blue dotted lines stands for the “unknown” true
developments (if available in the input data).</p>
<p>Recall, that the true reserve is
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo>=</mo><mn>7963</mn></mrow><annotation encoding="application/x-tex">R = 7963</annotation></semantics></math>.
The reserve predictions provided by the proposed nonparametric reserving
methods are</p>
<ul>
<li>PARALLAX:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>R</mi><mo accent="true">̂</mo></mover><mo>=</mo><mn>8540</mn></mrow><annotation encoding="application/x-tex">\widehat{R} = 8540</annotation></semantics></math>
</li>
<li>REACT:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>R</mi><mo accent="true">̂</mo></mover><mo>=</mo><mn>8358</mn></mrow><annotation encoding="application/x-tex">\widehat{R} = 8358</annotation></semantics></math>
</li>
<li>MACRAME:
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>R</mi><mo accent="true">̂</mo></mover><mo>=</mo><mn>8082</mn></mrow><annotation encoding="application/x-tex">\widehat{R} = 8082</annotation></semantics></math>
</li>
</ul>
<p>This can be directly compared with the performance of some common
parametric reserving methods implemented in the <code>ChainLadder</code>
package:</p>
<ul>
<li>chainladder method (implemented in <code><a href="http://mages.github.io/ChainLadder/reference/chainladder.html" class="external-link">chainladder()</a></code>):
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>R</mi><mo accent="true">̂</mo></mover><mo>=</mo><mn>8687</mn></mrow><annotation encoding="application/x-tex">\widehat{R} = 8687</annotation></semantics></math>
</li>
<li>over-dispersed Poisson model (<code><a href="http://mages.github.io/ChainLadder/reference/glmReserve.html" class="external-link">glmReserve()</a></code>):
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>R</mi><mo accent="true">̂</mo></mover><mo>=</mo><mn>8601</mn></mrow><annotation encoding="application/x-tex">\widehat{R} = 8601</annotation></semantics></math>
</li>
<li>Tweedie model (<code><a href="http://mages.github.io/ChainLadder/reference/tweedieReserve.html" class="external-link">tweedieReserve()</a></code>):
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>R</mi><mo accent="true">̂</mo></mover><mo>=</mo><mn>8610</mn></mrow><annotation encoding="application/x-tex">\widehat{R} = 8610</annotation></semantics></math>
</li>
</ul>
<p>The best reserve prediction (in terms of the smallest difference
between the true reserve) is given by the MACRAME algorithm. More
complex empirical comparisons can be found in Maciak, Mizera, and Pešta
(2022).</p>
<p>The underlying stochastic model behind the MACRAME algorithm invites
additional user-defined adjustments and practically oriented
modifications; unlike the MACRAME algorithm described in Maciak, Mizera,
and Pešta (2022), where only a constrained and rather limited version of
the algorithm was proposed, the implementation in the <strong>R</strong>
function <code><a href="../reference/mcReserve.html">mcReserve()</a></code> in the <code>ProfileLadder</code>
package allows for all kinds of fine tuning and user-based
modifications. Specific details can be either found in Maciak, Matúš,
Mizera, and Pešta (2026) or in the package documentation (<a href="https://42463863.github.io/ProfileLadder/">GitHub</a> or <a href="https://CRAN.R-project.org/package=ProfileLadder" class="external-link">CRAN</a>).</p>
<div style="border: 1px solid #ff0000; background-color: #F5E4E6; padding: 10px; border-radius: 5px;">
<p>
</p>
<p>Maciak, M., Mizera, I., and Pešta, M. (2022). <strong>Functional
Profile Techniques for Claims Reserving</strong>. <em>ASTIN
Bulletin</em>, 52(2), 449 – 482. DOI: <a href="https://www.cambridge.org/core/journals/astin-bulletin-journal-of-the-iaa/article/abs/functional-profile-techniques-for-claims-reserving/6A4C1D8FA8FC608CCF2C55BDE4C4522D" class="external-link">10.1017/asb.2022.4</a></p>
Maciak, M., Matúš, R., Mizera, I., and Pešta, M. (2026).
<strong>ProfileLadder: Functional-Based Reserving</strong>. <em>The R
journal</em>, <em>(to appear)</em>. URL: <a href="https://journal.r-project.org/issues.html" class="external-link">https://journal.r-project.org/issues.html</a>

</div>
<div class="section level3">
<h3 id="user-based-modifications-of-macrame">User-based modifications of MACRAME<a class="anchor" aria-label="anchor" href="#user-based-modifications-of-macrame"></a>
</h3>
<p>The implementation of the algorithm in the R function
<code><a href="../reference/mcReserve.html">mcReserve()</a></code> allows users to intervene with various
modifications—starting with a pre-specified<br>
number of the Markov states to be required, selecting the method how the
run-off triangle increments are summarized into the states, or providing
a fully manual specification of the states
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mo stretchy="false" form="prefix">{</mo><msub><mi>s</mi><mn>1</mn></msub><mo>,</mo><mi>…</mi><mo>,</mo><msub><mi>s</mi><mi>m</mi></msub><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">{S} = \{s_1, \dots, s_m\}</annotation></semantics></math>,
breaks
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mi>g</mi><mi>k</mi></msub><msubsup><mo stretchy="false" form="postfix">}</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mi>m</mi></msubsup></mrow><annotation encoding="application/x-tex">\{g_k\}_{k = 0}^m</annotation></semantics></math>,
or the subset of increments to be used.</p>
<p>Details (that are omitted here) can be found in the R help session
for the <code><a href="../reference/mcReserve.html">mcReserve()</a></code> function by typing</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span><span class="st">"mcReserve"</span><span class="op">)</span></span></code></pre></div>
<p>In order to get some useful insight about the structure of the
incremental run-off triangle and to offer some visual inspection for
various user-based modifications of the underlying Markov chain in the
<code><a href="../reference/mcReserve.html">mcReserve()</a></code> function, there is another practical tool
implemented in the <code>ProfileLadder</code> package—function
<code><a href="../reference/incrExplor.html">incrExplor()</a></code>.</p>
<p>The function takes the run-off triangle as an input (fully observed
or not, incremental or cumulative) and returns a complex empirical
exploration of the incremental payments (that are used by
<code>macrame()</code> to set the Markov chain within the MACRAME
algorithm).</p>
<p>The default performance of the <code><a href="../reference/incrExplor.html">incrExplor()</a></code> function
returns a fully data-driven setup of the underlying Markov chain—the set
of the data-driven Markov states and the corresponding set of break
points:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">exploratory.casco</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">casco</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Data-driven (default) setting of the Markov Chain in MACRAME</span></span></span></code></pre>
<pre><code><span><span class="co">## MC States: -957.5 -272 -129.5 -90 -55.5 -35.5 -25.5 -13 -4 0 230.5 420 716.5 1645 3863 116245 172120.5</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #D700D7;">Corresponding bins for the run-off triangle increments</span></span></span>
<span><span class="co"><span style="color: #D700D7;">## </span> [1] "[-Inf, -390)"    "[-390, -162)"    "[-162, -98)"     "[-98, -69)"     </span></span>
<span><span class="co">##  [5] "[-69, -43)"      "[-43, -30)"      "[-30, -18)"      "[-18, -6)"      </span></span>
<span><span class="co">##  [9] "[-6, 0)"         "[0, 123)"        "[123, 299)"      "[299, 489)"     </span></span>
<span><span class="co">## [13] "[489, 1239)"     "[1239, 2725)"    "[2725, 98941)"   "[98941, 146134)"</span></span>
<span><span class="co">## [17] "[146134, Inf)"</span></span></code></pre>
<p>The output from the <code><a href="../reference/incrExplor.html">incrExplor()</a></code> function is an object
of the S3 class <code>mcSetup</code> and the S3 methods
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> and <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> can be applied to get
further details.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">exploratory.casco</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Input triangle type: Cumulative</span></span></span></code></pre>
<pre><code><span><span class="co">## Summary of the increments</span></span>
<span><span class="co">##                        Min   1st Q. Median       Mean   3rd Q.    Max</span></span>
<span><span class="co">## Raw increments  -3028.0000 -62.0000     -2 18235.0000 867.0000 256454</span></span>
<span><span class="co">## Std. increments    -0.0118  -0.0002      0     0.0711   0.0034      1</span></span>
<span><span class="co">##                    Std.Er.</span></span>
<span><span class="co">## Raw increments  51534.0000</span></span>
<span><span class="co">## Std. increments     0.2009</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Total number of increments: 136,  Total number of unique increments: 121</span></span>
<span><span class="co">## Number of suspicious increments (using 2σ rule): 15,  Outliers (3σ rule): 6</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Data-driven bins for the run-off triangle increments</span></span>
<span><span class="co">##  [1] "[-Inf, -390)"    "[-390, -162)"    "[-162, -98)"     "[-98, -69)"     </span></span>
<span><span class="co">##  [5] "[-69, -43)"      "[-43, -30)"      "[-30, -18)"      "[-18, -6)"      </span></span>
<span><span class="co">##  [9] "[-6, 0)"         "[0, 123)"        "[123, 299)"      "[299, 489)"     </span></span>
<span><span class="co">## [13] "[489, 1239)"     "[1239, 2725)"    "[2725, 98941)"   "[98941, 146134)"</span></span>
<span><span class="co">## [17] "[146134, Inf)"  </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Markov Chain states (medians of the increments within each bin)</span></span>
<span><span class="co">##  [1]   -957.5   -272.0   -129.5    -90.0    -55.5    -35.5    -25.5    -13.0</span></span>
<span><span class="co">##  [9]     -4.0      0.0    230.5    420.0    716.5   1645.0   3863.0 116245.0</span></span>
<span><span class="co">## [17] 172120.5</span></span></code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">exploratory.casco</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-23-1.png" class="r-plt" alt="" width="98%"><img src="my_vignette_files/figure-html/unnamed-chunk-23-2.png" class="r-plt" alt="" width="98%"></p>
<p>Using the barplot figure above, the break-points
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mi>g</mi><mi>m</mi></msub><msubsup><mo stretchy="false" form="postfix">}</mo><mrow><mi>m</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">\{g_{m}\}_{m = 0}^n</annotation></semantics></math>
are listed as interval labels on the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics></math>
axis. The Markov states (taken by default as medians of the increments
belonging to a specific interval defined by two consecutive break
points) are given as the blue labes within the bars.</p>
<p>The data-driven method for defining the break points and the
corresponding Markov states (that are provided in the outputs above) is
described and theoretically justified in Maciak, Mizera, and Pešta
(2022). Further details are omiited here.</p>
<p>Possible user-based modifications are described in the following
sections.</p>
<div class="section level4">
<h4 id="a-modifying-the-underlying-markov-states">a) Modifying the underlying Markov states<a class="anchor" aria-label="anchor" href="#a-modifying-the-underlying-markov-states"></a>
</h4>
<p>It can be noticed from the barplot above that there are relatively
many small (negative) Markov states (-957.5, -272.0, -129.5, etc.) that
are due to many rather small negative increments while there are much
more important (from the reserve prediction point of view) and much
larger positive claim payments that are reflected in a roughly same
amount of positive Markov states.</p>
<p>Thus, it could be interesting to modify the underlying Markov chain
in a way that all negative increments are rather ignored—for instance,
by introducing just one state for all zero and negative payments—and to
focuss more on crutial claim payments that may heavily effect the final
reserve. This can be done by the additional parameter
<code>states = ...</code> which is implemented in both functions—the
exploratory function <code><a href="../reference/incrExplor.html">incrExplor()</a></code> and the prediction
algorithm <code><a href="../reference/mcReserve.html">mcReserve()</a></code>.</p>
<p>In the following outputs, there are eight explicit Markov states used
(<code>c(0, 230, 420, 716, 1645, 3863, 116245, 172120)</code>) and the
corrresponding break points
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mn>1</mn></msub><mo>&lt;</mo><mi>.</mi><mi>.</mi><mi>.</mi><mo>&lt;</mo><msub><mi>g</mi><mn>7</mn></msub></mrow><annotation encoding="application/x-tex">g_1 &lt; ... &lt; g_{7}</annotation></semantics></math>
are determined as middle points between two consecutive Markov states
(with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mn>0</mn></msub><mo>=</mo><mo>−</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">g_0 = -\infty</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mn>9</mn></msub><mo>=</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">g_9 = \infty</annotation></semantics></math>):</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">modification.1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">casco</span>, states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">230</span>, <span class="fl">420</span>, <span class="fl">716</span>, <span class="fl">1645</span>, <span class="fl">3863</span>, <span class="fl">116245</span>, <span class="fl">172120</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-24-1.png" class="r-plt" alt="" width="98%"><img src="my_vignette_files/figure-html/unnamed-chunk-24-2.png" class="r-plt" alt="" width="98%"></p>
<p>The same set of Markov states can be analogously used to run the
MACRAME prediction (the output is omitted for brevity):</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">casco</span>, states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">230</span>, <span class="fl">420</span>, <span class="fl">716</span>, <span class="fl">1645</span>, <span class="fl">3863</span>, <span class="fl">116245</span>, <span class="fl">172120</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>All negative and small (i.e., below
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mn>115</mn><annotation encoding="application/x-tex">115</annotation></semantics></math>)
increments are now represented by one Markov state (zero) and other
incremental payments are represented by the remaining seven
pre-specified states. The MACRAME prediction with the same set of states
can be performed by the <code><a href="../reference/mcReserve.html">mcReserve()</a></code> function by using the
dedicated accesor method <code><a href="../reference/mcStates.html">mcStates()</a></code> as follows
(alternatively, the sequence of the states can be also plugged in
explicitly):</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">casco</span>, states <span class="op">=</span> <span class="fu"><a href="../reference/mcStates.html">mcStates</a></span><span class="op">(</span><span class="va">modification.1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The run-off triangle incremental payments are no longer equally
distributed among the bins—this can be only achieved if the break points
are calculated in the proposed data-driven manner.</p>
<p>However, the <code>states</code> parameter can be also specified
differently. Instead of specifying the underlying set of the Markov
states it can be used to change the amount of the states. For instance,
the choice <code>states = 5</code> will result in five Markov states
and, again, the increments will be distributed equally (as much as
possible). This can be also verified visually by</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">casco</span>, states <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-27-1.png" class="r-plt" alt="" width="98%"><img src="my_vignette_files/figure-html/unnamed-chunk-27-2.png" class="r-plt" alt="" width="98%"></p>
<p>The same Markov states (rounded in the figure above) will be used by
the MACRAME algorithm when specifying the same amount of the Markov
states, i.e., <code>state = 5</code>. This can be directly veryfied by
the following:</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">macrame.s5.casco</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">casco</span>, states <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mcStates.html">mcStates</a></span><span class="op">(</span><span class="va">macrame.s5.casco</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1]   -184.5    -41.0      0.0    477.0 107115.0</span></span></code></pre>
<p>The corresponding break points are</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mcBreaks.html">mcBreaks</a></span><span class="op">(</span><span class="va">macrame.s5.casco</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] -Inf  -88  -19  225 1771  Inf</span></span></code></pre>
<p>and the transition matrix with the estimated transition probabilities
is</p>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mcTrans.html">mcTrans</a></span><span class="op">(</span><span class="va">macrame.s5.casco</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        [,1]   [,2]   [,3]   [,4]   [,5]</span></span>
<span><span class="co">## [1,] 0.2801 0.1960 0.3839 0.1400 0.0000</span></span>
<span><span class="co">## [2,] 0.1644 0.2959 0.4740 0.0658 0.0000</span></span>
<span><span class="co">## [3,] 0.0000 0.0000 1.0000 0.0000 0.0000</span></span>
<span><span class="co">## [4,] 0.2206 0.1575 0.3383 0.1890 0.0945</span></span>
<span><span class="co">## [5,] 0.1315 0.0000 0.2767 0.3288 0.2630</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="b-specifying-explict-break-points">b) Specifying explict break points<a class="anchor" aria-label="anchor" href="#b-specifying-explict-break-points"></a>
</h4>
<p>Another parameter implemented for user modifications of the Markov
chain in the MACRAME algorithm is the parameter <code>breaks</code>
which can be used to explicitly provide the set of break points for the
run-off triangle increments.</p>
<p>However, a valid sequence of the break points—in a sense that
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>g</mi><mn>2</mn></msub><mo>&lt;</mo><mi>…</mi><mo>&lt;</mo><msub><mi>g</mi><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">g_1 &lt; g_2 &lt; \dots &lt; g_{m - 1}</annotation></semantics></math>—must
be provided. The first and the last break point
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mn>0</mn></msub><mo>=</mo><mo>−</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">g_0 = - \infty</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>g</mi><mi>m</mi></msub><mo>=</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">g_m = \infty</annotation></semantics></math>)
may or may not be specified. On the other hand, two consecutive break
points always need to contain at least one incremental payment in
between—otherwise, such consecutive bins are merged together to form a
new one.</p>
<p>Going back to the Casco incurance data where many negative increments
were noticed, it can be more appropriate to alter the underlying Markov
chain by providing a different set of break points (rather than changing
directly the Markov states). In such a way, the corresponding Markov
states will be still obtained using a statistical summary method (by
default, the Markov states are medians of the increments within the
bins).</p>
<p>The default break points are determined in a way that the increments
are equaly distributed among 17 non-overlapping bins (where the number
of bins being used is, by default, same as the dimension of the run-off
triangle). For instance, five bins with explicit breaks points
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mi>g</mi><mi>m</mi></msub><msubsup><mo stretchy="false" form="postfix">}</mo><mrow><mi>m</mi><mo>=</mo><mn>0</mn></mrow><mn>5</mn></msubsup><mo>≡</mo><mo stretchy="false" form="prefix">{</mo><mo>−</mo><mi>∞</mi><mo>,</mo><mn>0</mn><mo>,</mo><mn>100</mn><mo>,</mo><mn>500</mn><mo>,</mo><mn>5000</mn><mo>,</mo><mi>∞</mi><mo stretchy="false" form="postfix">}</mo></mrow><annotation encoding="application/x-tex">\{g_{m}\}_{m = 0}^5 \equiv \{-\infty, 0, 100, 500, 5000, \infty\}</annotation></semantics></math>
can be obtained by</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">modification.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">casco</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">5000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-31-1.png" class="r-plt" alt="" width="98%"><img src="my_vignette_files/figure-html/unnamed-chunk-31-2.png" class="r-plt" alt="" width="98%"></p>
<p>and the same resuld will be also obtained for any of the following
(outputs are omitted):</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">casco</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">5000</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">casco</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">5000</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">casco</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="cn">Inf</span>, <span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">5000</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The corresponding Markov states are calculated (by default) as
medians of the increments within each bin and they can be assessed by
using the <code><a href="../reference/mcStates.html">mcStates()</a></code> function</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mcStates.html">mcStates</a></span><span class="op">(</span><span class="va">modification.2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1]    -63.5      0.0    297.0   1645.0 144632.0</span></span></code></pre>
<p>The corresponding MACRAME reserve prediction using the same break
points (and the corresponding Markov states as well) is obtained
analogously by</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">casco</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">5000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## MACRAME reserve prediction (by origins)</span></span>
<span><span class="co">##          First   Latest Dev.To.Date   Ultimate       IBNR</span></span>
<span><span class="co">## 2       423582   522003   0.9999172   522046.2    43.2500</span></span>
<span><span class="co">## 3       373866   485984   1.0000000   485984.0     0.0000</span></span>
<span><span class="co">## 4       441769   557049   0.9996132   557264.5   215.5362</span></span>
<span><span class="co">## 5       503292   630271   1.0000000   630271.0     0.0000</span></span>
<span><span class="co">## 6       554625   701433   1.0000000   701433.0     0.0000</span></span>
<span><span class="co">## 7       613011   758233   0.9993793   758703.9   470.9047</span></span>
<span><span class="co">## 8       605922   761068   0.9992867   761611.3   543.2598</span></span>
<span><span class="co">## 9       555154   670158   0.9988864   670905.1   747.1026</span></span>
<span><span class="co">## 10      514900   626112   0.9965579   628274.6  2162.6048</span></span>
<span><span class="co">## 11      581196   708428   0.9988083   709273.2   845.2127</span></span>
<span><span class="co">## 12      613266   781561   0.9990129   782333.3   772.2756</span></span>
<span><span class="co">## 13      706120   894514   0.9973982   896847.4  2333.3986</span></span>
<span><span class="co">## 14      859707  1059593   0.9977591  1061972.8  2379.7958</span></span>
<span><span class="co">## 15      951189  1207771   0.9891633  1221002.6 13231.6383</span></span>
<span><span class="co">## 16     1061511  1317965   0.9900306  1331236.6 13271.6275</span></span>
<span><span class="co">## 17     1121591  1121591   0.9882740  1134898.8 13307.8470</span></span>
<span><span class="co">## total 10480701 12803734   0.9960849 12854058.5 50324.4536</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Overall reserve summary</span></span></span></code></pre>
<pre><code><span><span class="co">##     Est.Reserve    Est.Ultimate     Paid Amount    True Reserve        Reserve% </span></span>
<span><span class="co">##        50324.45     13543555.45     13493231.00              NA              NA</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="c-summary-method-for-incremental-payments">c) Summary method for incremental payments<a class="anchor" aria-label="anchor" href="#c-summary-method-for-incremental-payments"></a>
</h4>
<p>Instead of summarizing the increments within each bin by considering
the median value, another method can be specified by another parameter
<code>method</code> which can take on of four values:
<code>"median"</code> (default); <code>"mean"</code>,
<code>"min"</code>, and <code>"max"</code>.</p>
<p>Thus, considering the same set of breaks as before, it can be of some
interest to define Markov states not as medians of the increments within
each bin but taking maximum in every bin instead. This can be easily
achieved by</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new.breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">5000</span><span class="op">)</span></span>
<span><span class="va">exploratory.casco2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">casco</span>, breaks <span class="op">=</span> <span class="va">new.breaks</span>, method <span class="op">=</span> <span class="st">"max"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">exploratory.casco2</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-35-1.png" class="r-plt" alt="" width="98%"><img src="my_vignette_files/figure-html/unnamed-chunk-35-2.png" class="r-plt" alt="" width="98%"></p>
<p>The parameter <code>method</code> is only available for the
exploratory function <code><a href="../reference/incrExplor.html">incrExplor()</a></code> and, unlike the
parameters <code>states</code> and <code>breaks</code>, it is not
implemented in the <code><a href="../reference/mcReserve.html">mcReserve()</a></code> function. This is, however,
not limiting with respect to the performance of the MACRAME algorithm
implemented within <code><a href="../reference/mcReserve.html">mcReserve()</a></code>. Indeed, the parameter
<code>method = c("median", "mean", "min", "max")</code> is used to
summarize the increments within each bin defined by the break points in
<code>breaks = ...</code> and the corresponding Markov states can be
assessed from the <code><a href="../reference/incrExplor.html">incrExplor()</a></code> function by using the
appropriate accessor method, the function <code><a href="../reference/mcStates.html">mcStates()</a></code>.
Consequently, both the breaks (provided explicitly) and the states
(obtained as maximal increments within each bin) can be forwarded into
the <code><a href="../reference/mcReserve.html">mcReserve()</a></code> function to set up the MACRAME algorithm
correspondingly (output is omitted again):</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">casco</span>, breaks <span class="op">=</span> <span class="va">mew.breaks</span>, states <span class="op">=</span> <span class="fu"><a href="../reference/mcStates.html">mcStates</a></span><span class="op">(</span><span class="va">exploratory.casco2</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The previous also implies that users can fully manually set the
breaks and the Markov states when running the MACRAME algorithm. A valid
set of breaks is needed and the states must be always provided in a way,
that exactly one Markov state belongs to one interval determined by two
consecutive break points. More details can be found the package
documentation—particularly in the following two help sessions</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span><span class="st">"incrExplor"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/help.html" class="external-link">help</a></span><span class="op">(</span><span class="st">"mcReserve"</span><span class="op">)</span></span></code></pre></div>
<div style="border: 1px solid #66a3ff; background-color: #eeeeee; padding: 10px; border-radius: 5px;">
<p>
</p>
<p><strong>Note:</strong> There are four parameters implemented in the
<code><a href="../reference/incrExplor.html">incrExplor()</a></code> function to help users to properly tune the
underlying Markov chain for the MACRAME prediction
(<code>breaks = ...</code>, <code>states = ...</code>,
<code>method = ...</code>, and <code>out = ...</code>). On the other
hand, there are only two parameters used within the
<code><a href="../reference/mcReserve.html">mcReserve()</a></code> function.</p>
<p>The summary method for run-off triangle increments can be enforced
within the <code><a href="../reference/mcReserve.html">mcReserve()</a></code> function by using the appropriate
accessor functions:</p>
<ul>
<li>
<code><a href="../reference/mcBreaks.html">mcBreaks()</a></code> – function for extracting the set of break
points from <code><a href="../reference/incrExplor.html">incrExplor()</a></code> or <code><a href="../reference/mcReserve.html">mcReserve()</a></code>;</li>
<li>
<code><a href="../reference/mcStates.html">mcStates()</a></code> – function for extracting the Markov states
from <code><a href="../reference/incrExplor.html">incrExplor()</a></code> or <code><a href="../reference/mcReserve.html">mcReserve()</a></code>;</li>
<li>
<code><a href="../reference/mcTrans.html">mcTrans()</a></code> – function to extract the estimated
transition matrix from <code><a href="../reference/mcReserve.html">mcReserve()</a></code>.</li>
</ul>
<p>Note that the <code><a href="../reference/mcTrans.html">mcTrans()</a></code> function can be only applied to
the output of the <code><a href="../reference/mcReserve.html">mcReserve()</a></code> function as there is not
transition probability estimation in the exploratory tool
<code><a href="../reference/incrExplor.html">incrExplor()</a></code>.</p>
The parameter <code>out = ...</code> implemented in the
<code><a href="../reference/incrExplor.html">incrExplor()</a></code> function is discussed in the next section.

</div>
</div>
<div class="section level4">
<h4 id="d-subsets-of-incremental-payments">d) Subsets of incremental payments<a class="anchor" aria-label="anchor" href="#d-subsets-of-incremental-payments"></a>
</h4>
<p>The default functionality of the <code><a href="../reference/incrExplor.html">incrExplor()</a></code> function
is to provide users with the data-driven set of bins (the break points
respectively) and the corresponding Markov states for the underlying
run-off triangle. The first year payments in the run-off triagnle are
not considered by default (further discussion is provided in Maciak,
Mizera, and Pešta, 2022), but this restriction can be also altered—if
needed.</p>
<p>If there is a specific interest to also include the first year
payments when defining the Markov chain states and the corresponding
break points (or, alternatively, to exclude some other columns with the
incremental payments), an additional parameter <code>out = 1</code>
(default) can be changed correspondingly—the default value stands for
the first year increments that are typically not considered; the choice
<code>out = 0</code> uses all available increments
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">X_{i,j}</annotation></semantics></math>,
for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">i = 1, \dots, n</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi><mo>=</mo><mn>1</mn><mo>,</mo><mi>…</mi><mo>,</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo>−</mo><mi>i</mi></mrow><annotation encoding="application/x-tex">j = 1, \dots, n + 1 - i</annotation></semantics></math>;
in order to exclude, for example, first three columns, the parameter can
be specified as <code>out = c(1,2,3)</code>. The change of this
parameter is also reflected by the output of <code><a href="../reference/incrExplor.html">incrExplor()</a></code>
which, in addition, contains analogous information as before, however,
for a user-modified subset of the incremental payments.</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">cameron</span>, out <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Data-driven (default) setting of the Markov Chain in MACRAME</span></span></span></code></pre>
<pre><code><span><span class="co">## MC States: 13 81 197 302.5 438 601 948 1672.5 3073 3993</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #D700D7;">Corresponding bins for the run-off triangle increments</span></span></span>
<span><span class="co"><span style="color: #D700D7;">## </span> [1] "[-Inf, 75)"   "[75, 147)"    "[147, 288)"   "[288, 388)"   "[388, 554)"  </span></span>
<span><span class="co">##  [6] "[554, 780)"   "[780, 1465)"  "[1465, 2587)" "[2587, 3955)" "[3955, Inf)"</span></span></code></pre>
<pre><code><span><span class="co">## User-modified MC setting</span></span></code></pre>
<pre><code><span><span class="co">## MC States: 14.5 125 285.5 400 601 978 2186.5 3689 5007.5 5984</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Corresponding bins for the run-off triangle increments</span></span>
<span><span class="co">##  [1] "[-Inf, 79)"   "[79, 197)"    "[197, 349)"   "[349, 529)"   "[529, 786)"  </span></span>
<span><span class="co">##  [6] "[786, 1595)"  "[1595, 3085)" "[3085, 3984)" "[3984, 5244)" "[5244, Inf)" </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Development periods (run-off triangle columns) not considered: 0</span></span>
<span><span class="co">## Method selected to summarize the increments within each bin: DEFAULT (median)</span></span></code></pre>
<p>The S3 method <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> can be applied to obtain some
graphical visualization of the user-defined subset of increments and
their overall summary (together with the comparison with the default
selection).</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">cameron</span>, out <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-39-1.png" class="r-plt" alt="" width="98%"></p>
</div>
<div class="section level4">
<h4 id="e-illustration-of-different-macrame-settings">e) Illustration of different MACRAME settings<a class="anchor" aria-label="anchor" href="#e-illustration-of-different-macrame-settings"></a>
</h4>
<p>Different settings for the break points and the Markov states result
in different reserve predictions (and the corresponding missing profiles
completions). In the following, there is again the Cameron Mutual
dataset used (with the known true reserve 7963) with the predicted
reserves ranging from 7827 (slightly underestimated reserve) up to 22587
(heavily overestimated reserve).</p>
<p>Various user-based modifications are used for the MACRAME predictions
below (the first one being the default performance).</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span> <span class="co">### default setting with 10 MC states</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">cameron</span>, states <span class="op">=</span> <span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="co">### four states (otherwise default)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">cameron</span>, states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">500</span>, <span class="fl">1500</span>, <span class="fl">3000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co">### explicit states</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">cameron</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">1500</span>, <span class="fl">2000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co">### explicit breaks</span></span>
<span>     </span>
<span><span class="va">user.breaks</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">1500</span>, <span class="fl">2000</span><span class="op">)</span></span>
<span><span class="va">user.method</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/incrExplor.html">incrExplor</a></span><span class="op">(</span><span class="va">cameron</span>, breaks <span class="op">=</span> <span class="va">user.breaks</span>, method <span class="op">=</span> <span class="st">"max"</span><span class="op">)</span></span>
<span><span class="va">final.states</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mcStates.html">mcStates</a></span><span class="op">(</span><span class="va">user.method</span><span class="op">)</span></span>
<span><span class="co">### explicit breaks and Markov states as maximma </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">cameron</span>, breaks <span class="op">=</span> <span class="va">user.breaks</span>, states <span class="op">=</span> <span class="va">final.states</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">### explicit breaks and explicit states</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">cameron</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">1500</span><span class="op">)</span>, states <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">999</span>, <span class="fl">1001</span>, <span class="fl">3000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-40-1.png" class="r-plt" alt="" width="98%"></p>
<div style="border: 1px solid #66a3ff; background-color: #e6f0ff; padding: 10px; border-radius: 5px;">
<p>
<strong>Note:</strong> The default performance of the MACRAME algorithm
implemented by the <strong>R</strong> function <code><a href="../reference/mcReserve.html">mcReserve()</a></code>
is fully-data driven and it fully corresponds with the breaks and Markov
states as proposed and theoretically justified in Maciak, Mizera, and
Pešta, (2022).
</p>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="permutation-bootstrap">5. Permutation bootstrap<a class="anchor" aria-label="anchor" href="#permutation-bootstrap"></a>
</h2>
<p>The reserve prediction
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mi>R</mi><mo accent="true">̂</mo></mover><annotation encoding="application/x-tex">\widehat{{R}}</annotation></semantics></math>
for the unknown claims reserve
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>R</mi><annotation encoding="application/x-tex">{R}</annotation></semantics></math>
provides only a partial information in the entire loss reserving
problem. In practice, a prediction of the whole reserve distribution is
required too (for instance, by risk reserving assessment guidelines like
Solvency II).</p>
<p>Classical techniques employ a residual (parametric or semiparametric)
bootstrap approach (typically based on the back-fitted residuals) to
emulate the distribution of interest. However, for the functional-based
claims reserving there is a different strategy: permutation bootstrap.
The prediction of the reserve distribution is still obtained via
bootstrap resampling, but the algorithm avoids the use of residuals by
resampling (permuting) the whole functional profiles. The rows of the
completed run-off triangle produced by a certain algorithm—by each of
those described above, but also any of the classical parametric
reserving models implemented in the <code>ChainLadder</code> package—are
treated as independent functional profiles. The completed triangle, the
data matrix
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">{</mo><msub><mover><mi>Y</mi><mo accent="true">̂</mo></mover><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><msubsup><mo stretchy="false" form="postfix">}</mo><mrow><mi>i</mi><mo>,</mo><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>n</mi><mo>,</mo><mi>n</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">\{\widehat{Y}_{i,j}\}_{i,j=1}^{n,n}</annotation></semantics></math>,
can be standardized: each row is divided by the first positive value
within the row (considered from the left—which is, very likely, the
first incremental payment in each row). The standardization step is
proposed on the grounds that it is very typical in practice that the
claims amounts paid in the first development period substantially
increase over the years (possibly the effect of economical growth,
inflation, more advanced or more expensive technology, etc.). The
standardization is set as a default, but the user can suppress it if
desiring so.</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">permute.cameron</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/permuteReserve.html">permuteReserve</a></span><span class="op">(</span><span class="fu"><a href="../reference/mcReserve.html">mcReserve</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span>, B <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>The output from the <code><a href="../reference/permuteReserve.html">permuteReserve()</a></code> function is an
object of the S3 class <code>permutedReserve</code> and S3 methods
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> or <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> can be applied to get more
detailed information:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">permute.cameron</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## MACRAME based reserve prediction (with B = 100 bootstrap permutations)</span></span>
<span><span class="co">##       First Latest Dev.To.Date   Ultimate       IBNR        S.E        CV</span></span>
<span><span class="co">## 2      5984  13113   0.9964286  13160.000   47.00000   20.35946 0.4331799</span></span>
<span><span class="co">## 3      7452  15720   0.9950067  15798.889   78.88889   38.10804 0.4830597</span></span>
<span><span class="co">## 4      7115  13872   0.9906724  14002.611  130.61111  116.55286 0.8923656</span></span>
<span><span class="co">## 5      5753  11282   0.9840866  11464.438  182.43827  158.73832 0.8700933</span></span>
<span><span class="co">## 6      3937   8757   0.9749940   8981.594  224.59362  125.88048 0.5604811</span></span>
<span><span class="co">## 7      5127   9325   0.9535135   9779.620  454.61986  253.74400 0.5581455</span></span>
<span><span class="co">## 8      5046   8984   0.8241040  10901.537 1917.53724  552.09226 0.2879174</span></span>
<span><span class="co">## 9      5129   8202   0.7664369  10701.468 2499.46806  644.56539 0.2578810</span></span>
<span><span class="co">## 10     3689   3689   0.5915835   6235.806 2546.80632  523.25414 0.2054550</span></span>
<span><span class="co">## total 49232  92944   0.9200011 101025.963 8081.96337 1348.35146 0.1668346</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Overall reserve distribution</span></span></span></code></pre>
<pre><code><span><span class="co">##      Boot.Mean        Std.Er.       BootCov%    BootVar.995 </span></span>
<span><span class="co">##    9526.563369    1348.351459      14.153598       1.436145 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## The MACRAME predicted reserve represents the 10.89% quantile of the reserve distribution</span></span>
<span><span class="co">## Bootstrap simulated reserves beyond 2σ rule: 5 (out of 100)</span></span></code></pre>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">permute.cameron</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-42-1.png" class="r-plt" alt="" width="98%"></p>
<p>Note that in the summary output above there already colums
<code>S.E.</code> and <code>CV</code> provided and they can be directly
compared with the values obtained from the distributional assumption
(using, for instance, the over-dispersed Poisson model) from the
<code>ChainLadder</code> package</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu"><a href="http://mages.github.io/ChainLadder/reference/glmReserve.html" class="external-link">glmReserve</a></span><span class="op">(</span><span class="fu"><a href="../reference/observed.html">observed</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       Latest Dev.To.Date Ultimate IBNR          S.E        CV</span></span>
<span><span class="co">## 2      13113   1.0000000    13113    0   0.01035287       Inf</span></span>
<span><span class="co">## 3      15720   0.9992372    15732   12  29.38975320 2.4491461</span></span>
<span><span class="co">## 4      13872   0.9934116    13964   92  73.46098788 0.7984890</span></span>
<span><span class="co">## 5      11282   0.9850694    11453  171  96.26787355 0.5629700</span></span>
<span><span class="co">## 6       8757   0.9688019     9039  282 120.58781735 0.4276164</span></span>
<span><span class="co">## 7       9325   0.9397360     9923  598 177.57019068 0.2969401</span></span>
<span><span class="co">## 8       8984   0.8905630    10088 1104 246.00693847 0.2228324</span></span>
<span><span class="co">## 9       8202   0.7789914    10529 2327 379.54811405 0.1631062</span></span>
<span><span class="co">## 10      3689   0.4788422     7704 4015 622.22022041 0.1549739</span></span>
<span><span class="co">## total  92944   0.9152986   101545 8601 880.66723938 0.1023913</span></span></code></pre>
<div style="border: 1px solid #66a3ff; background-color: #eeeeee; padding: 10px; border-radius: 5px;">
<p>
<strong>Note:</strong> The permutation bootstrap implemented in the
<strong>R</strong> function <code><a href="../reference/permuteReserve.html">permuteReserve()</a></code> (from the
<strong>R</strong> package <code>ProfileLadder</code>) handles not only
objects created by the <code><a href="../reference/parallelReserve.html">parallelReserve()</a></code> function and the
<code><a href="../reference/mcReserve.html">mcReserve()</a></code> function (thus, S3 objects of the class
<code>profileLadder</code>) but it also works with the objects generated
by the classical reserving techniques—those implemented in the
<strong>R</strong> package <code>ChainLadder</code> (in particular, the
over-dispersed Poisson model, the Mack model, chainladder model, or the
Tweedie formula).
</p>
</div>
<p>Note also the same layout used for the S3 method <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>
when applied to the output of the permutation bootstrap function
<code>pemuteReserve()</code> as the one adoped for the residual
bootstrap resampling in classical parametric chainladder based
methods:</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="http://mages.github.io/ChainLadder/reference/BootChainLadder.html" class="external-link">BootChainLadder</a></span><span class="op">(</span><span class="fu"><a href="../reference/observed.html">observed</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-44-1.png" class="r-plt" alt="" width="98%"></p>
<p>Thus, the overall distributional (reserve) prediction can be obtained
from different perspective: adopting some distributional assumptions
(such as the Poisson model), using the residual bootstrap approach, or
performing the permutation bootstrap for whole functional profiles.</p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cameron.glm</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://mages.github.io/ChainLadder/reference/glmReserve.html" class="external-link">glmReserve</a></span><span class="op">(</span><span class="fu"><a href="../reference/observed.html">observed</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cameron.boot</span> <span class="op">&lt;-</span> <span class="fu"><a href="http://mages.github.io/ChainLadder/reference/glmReserve.html" class="external-link">glmReserve</a></span><span class="op">(</span><span class="fu"><a href="../reference/observed.html">observed</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span>, mse.method <span class="op">=</span> <span class="st">"bootstrap"</span>, nsim <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">cameron.permute</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/permuteReserve.html">permuteReserve</a></span><span class="op">(</span><span class="fu"><a href="http://mages.github.io/ChainLadder/reference/glmReserve.html" class="external-link">glmReserve</a></span><span class="op">(</span><span class="fu"><a href="../reference/observed.html">observed</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span>, B <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>All three <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> outputs below contains full
information (especially the last two columns denoted as <code>S.E</code>
and <code>CV</code>):</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cameron.glm</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       Latest Dev.To.Date Ultimate IBNR          S.E        CV</span></span>
<span><span class="co">## 2      13113   1.0000000    13113    0   0.01035287       Inf</span></span>
<span><span class="co">## 3      15720   0.9992372    15732   12  29.38975320 2.4491461</span></span>
<span><span class="co">## 4      13872   0.9934116    13964   92  73.46098788 0.7984890</span></span>
<span><span class="co">## 5      11282   0.9850694    11453  171  96.26787355 0.5629700</span></span>
<span><span class="co">## 6       8757   0.9688019     9039  282 120.58781735 0.4276164</span></span>
<span><span class="co">## 7       9325   0.9397360     9923  598 177.57019068 0.2969401</span></span>
<span><span class="co">## 8       8984   0.8905630    10088 1104 246.00693847 0.2228324</span></span>
<span><span class="co">## 9       8202   0.7789914    10529 2327 379.54811405 0.1631062</span></span>
<span><span class="co">## 10      3689   0.4788422     7704 4015 622.22022041 0.1549739</span></span>
<span><span class="co">## total  92944   0.9152986   101545 8601 880.66723938 0.1023913</span></span></code></pre>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cameron.boot</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       Latest Dev.To.Date Ultimate IBNR       S.E         CV</span></span>
<span><span class="co">## 2      13113   1.0000000    13113    0   0.00000        NaN</span></span>
<span><span class="co">## 3      15720   0.9992372    15732   12  39.78803 3.31566877</span></span>
<span><span class="co">## 4      13872   0.9934116    13964   92  69.63145 0.75686361</span></span>
<span><span class="co">## 5      11282   0.9850694    11453  171  88.73998 0.51894727</span></span>
<span><span class="co">## 6       8757   0.9688019     9039  282 108.17280 0.38359149</span></span>
<span><span class="co">## 7       9325   0.9397360     9923  598 174.12157 0.29117319</span></span>
<span><span class="co">## 8       8984   0.8905630    10088 1104 267.14475 0.24197894</span></span>
<span><span class="co">## 9       8202   0.7789914    10529 2327 393.02842 0.16889919</span></span>
<span><span class="co">## 10      3689   0.4788422     7704 4015 556.93632 0.13871390</span></span>
<span><span class="co">## total  92944   0.9152986   101545 8601 841.41341 0.09782739</span></span></code></pre>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cameron.permute</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## GLM based reserve prediction (with B = 100 bootstrap permutations)</span></span>
<span><span class="co">##       First Latest Dev.To.Date Ultimate IBNR         S.E        CV</span></span>
<span><span class="co">## 2      5984  13113   1.0000000    13113    0    0.000000       NaN</span></span>
<span><span class="co">## 3      7452  15720   0.9992372    15732   12    3.087699 0.2573083</span></span>
<span><span class="co">## 4      7115  13872   0.9934116    13964   92   14.070626 0.1529416</span></span>
<span><span class="co">## 5      5753  11282   0.9850694    11453  171   35.269466 0.2062542</span></span>
<span><span class="co">## 6      3937   8757   0.9688019     9039  282   89.645139 0.3178906</span></span>
<span><span class="co">## 7      5127   9325   0.9397360     9923  598  140.511467 0.2349690</span></span>
<span><span class="co">## 8      5046   8984   0.8905630    10088 1104  220.787040 0.1999883</span></span>
<span><span class="co">## 9      5129   8202   0.7789174    10530 2328  544.173060 0.2337513</span></span>
<span><span class="co">## 10     3689   3689   0.4789043     7703 4014 1225.273638 0.3052500</span></span>
<span><span class="co">## total 49232  92944   0.9152986   101545 8601 1231.636024 0.1431968</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #D700D7;">Overall reserve distribution</span></span></span></code></pre>
<pre><code><span><span class="co">##      Boot.Mean        Std.Er.       BootCov%    BootVar.995 </span></span>
<span><span class="co">##   10916.062751    1231.636024      11.282786       1.232687 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## The GLM predicted reserve represents the 4.95% quantile of the reserve distribution</span></span>
<span><span class="co">## Bootstrap simulated reserves beyond 2σ rule: 1 (out of 100)</span></span></code></pre>
<div style="border: 1px solid #66a3ff; background-color: #eeeeee; padding: 10px; border-radius: 5px;">
<p>
<strong>Note:</strong> The <code><a href="../reference/permuteReserve.html">permuteReserve()</a></code> function
returns a relatively complex <strong>R</strong> object of the S3 class
<code>permutedReserve</code> which can be quite memory demanding
(especially for large run-off triangles and large number of
permutations. For this reason, there is an additional parameter
<code>outputAll = TRUE</code> (set as <code>TRUE</code> by default) used
to suppress compex outputs and important summary characteristics are
printed only (for <code>outputAll = FALSE</code>).
</p>
</div>
</div>
<div class="section level2">
<h2 id="generic-s3-method-predict">6. Generic S3 method <code>predict()</code><a class="anchor" aria-label="anchor" href="#generic-s3-method-predict"></a>
</h2>
<p>Finally, there is one key S3 method implemented in the
<strong>R</strong> package <code>ProfileLadder</code> that was not
mentioned yet—the S3 method <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code>. This function is not
only useful for the actuaries, but it also has important practical
utilizations in any type of risk modeling. The S3 method
<code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> is implemented for the objects of the S3 class
<code>profileLadder</code> that are created by the
<code><a href="../reference/parallelReserve.html">parallelReserve()</a></code> function or the <code><a href="../reference/mcReserve.html">mcReserve()</a></code>
function (for details, we refer to the help session obtained by
<code><a href="../reference/predict.profileLadder.html">help("predict.profileLadder")</a></code>.</p>
<p>Instead of completing the run-off triangle into a full square (as
performed by one of the algorithms PARALLAX, REACT, or MACRAME), the
<code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> method only returns the prediction of the next
running diagonal (also called a <em>1-step-ahead prediction</em> in the
acturial circles).</p>
<p>The same nonparametric algorithms are used for the diagonal
prediction; however, the output is not a completed square but rather a
new (extended) run-off triangle of the dimensions
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">n \times (n + 1)</annotation></semantics></math>:</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">diag.cameron</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="fu"><a href="../reference/parallelReserve.html">parallelReserve</a></span><span class="op">(</span><span class="va">cameron</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #3A3A3A;">5244</span>     <span style="color: #3A3A3A;"> 9228</span>   <span style="color: #3A3A3A;">10823</span>   <span style="color: #3A3A3A;">11352</span>   <span style="color: #3A3A3A;">11791</span>   <span style="color: #3A3A3A;">12082</span>   <span style="color: #3A3A3A;">12120</span>   <span style="color: #3A3A3A;">12199</span>   <span style="color: #3A3A3A;">12215</span>   <span style="color: #3A3A3A;">12215</span>   <span style="color: #D700D7;">12215</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5984</span>     <span style="color: #3A3A3A;"> 9939</span>   <span style="color: #3A3A3A;">11725</span>   <span style="color: #3A3A3A;">12346</span>   <span style="color: #3A3A3A;">12746</span>   <span style="color: #3A3A3A;">12909</span>   <span style="color: #3A3A3A;">13034</span>   <span style="color: #3A3A3A;">13109</span>   <span style="color: #3A3A3A;">13113</span>   <span style="color: #D700D7;">13113</span>   <span style="color: #D700D7;">    .</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">7452</span>     <span style="color: #3A3A3A;">12421</span>   <span style="color: #3A3A3A;">14171</span>   <span style="color: #3A3A3A;">14752</span>   <span style="color: #3A3A3A;">15066</span>   <span style="color: #3A3A3A;">15354</span>   <span style="color: #3A3A3A;">15637</span>   <span style="color: #3A3A3A;">15720</span>   <span style="color: #D700D7;">15724</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">7115</span>     <span style="color: #3A3A3A;">11117</span>   <span style="color: #3A3A3A;">12488</span>   <span style="color: #3A3A3A;">13274</span>   <span style="color: #3A3A3A;">13662</span>   <span style="color: #3A3A3A;">13859</span>   <span style="color: #3A3A3A;">13872</span>   <span style="color: #D700D7;">13947</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5753</span>     <span style="color: #3A3A3A;"> 8969</span>   <span style="color: #3A3A3A;"> 9917</span>   <span style="color: #3A3A3A;">10697</span>   <span style="color: #3A3A3A;">11135</span>   <span style="color: #3A3A3A;">11282</span>   <span style="color: #D700D7;">11320</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">3937</span>     <span style="color: #3A3A3A;"> 6524</span>   <span style="color: #3A3A3A;"> 7989</span>   <span style="color: #3A3A3A;"> 8543</span>   <span style="color: #3A3A3A;"> 8757</span>   <span style="color: #D700D7;"> 8904</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5127</span>     <span style="color: #3A3A3A;"> 8212</span>   <span style="color: #3A3A3A;"> 8976</span>   <span style="color: #3A3A3A;"> 9325</span>   <span style="color: #D700D7;"> 9539</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5046</span>     <span style="color: #3A3A3A;"> 8006</span>   <span style="color: #3A3A3A;"> 8984</span>   <span style="color: #D700D7;"> 9333</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">5129</span>     <span style="color: #3A3A3A;"> 8202</span>   <span style="color: #D700D7;"> 8966</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   </span></span>
<span><span class="co">## <span style="color: #3A3A3A;">3689</span>     <span style="color: #D700D7;"> 6276</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   <span style="color: #D700D7;">    .</span>   </span></span></code></pre>
<p>The S3 method <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> can be used to visualize the
diagonal <em>1-step-ahead</em> prediction</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">diag.cameron</span><span class="op">)</span></span></code></pre></div>
<p><img src="my_vignette_files/figure-html/unnamed-chunk-48-1.png" class="r-plt" alt="" width="98%"></p>
</div>
<div class="section level2">
<h2 id="conclussion">Conclussion<a class="anchor" aria-label="anchor" href="#conclussion"></a>
</h2>
<p>The main core of the <strong>R</strong> package
<code>ProfileLadder</code> consists of three key
functions—<code><a href="../reference/parallelReserve.html">parallelReserve()</a></code> for applying the PARALLAX or
REACT algorithm, <code><a href="../reference/mcReserve.html">mcReserve()</a></code> implementing the MACRAME
algorithm, and <code>permutedReserve()</code> providing the permutation
bootstrap add-on. Another generic functions (for the S3 objects of the
class <code>profileLadder</code>, <code>profilePredict</code>,
<code>mcSetup</code>, and <code>permutedReserve</code>) are also
implemented to facilitate a well structured summary of the outputs and
graphical visualizations of the results.</p>
<p>There are also a few other helpful functions implemented in the
<code>ProfileLadder</code> package. For a complex description and
illustrative examples, we refer to the <strong>R</strong> help sessions
by using the standard <code><a href="https://rdrr.io/r/utils/help.html" class="external-link">help()</a></code> command.</p>
<p>The <code>ProfileLadder</code> package is particularly developed to
implement nonparametric methods into the actuarial risk assessment
process performed by insurance companies (typically on a yearly or
quarterly basis). Nevertheless, the underlying run-off triangle can be
formally also represented in terms of an incomplete panel data scheme
that is generally well known among statisticians and all types of
practitioners.</p>
<hr>
<div class="section level4">
<h4 id="acknowledgement">Acknowledgement<a class="anchor" aria-label="anchor" href="#acknowledgement"></a>
</h4>
<p>The authors express sincere thanks to Kurt Hornik and Rob Hyndman for
their insight and some useful pieces of advice regarding the
<code>ProfileLadder</code> package. The authors are also grateful to
Petr Jedlička from the Czech Insurers’ Bureau and Pavel Koudelka from
Generali Česká pojišťovna a.s., for providing complex data from
real-life insurance practice—not only for internal evaluation purposes
but also for public access within the <strong>R</strong> package
<code>ProfileLadder</code>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matúš Maciak, Rastislav Matúš, Ivan Mizera, Michal Pešta.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>



  sidebar.html

  </body>
</html>
